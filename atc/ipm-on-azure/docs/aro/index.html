<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Azure RedHat OpenShift for IBM Product Master">
  <meta name="author" content="joseph.tingiris@mastechinfotrellis.com">
  <link rel="canonical" href="https://mitaei.github.io/atc/ipm-on-azure/docs/aro/">
  <link rel="shortcut icon" href="img/favicon.ico">
  <title>IPM on Azure</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="css/theme.css" />
  <link rel="stylesheet" href="css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" />
  <link href="css/mit-extra.css" rel="stylesheet" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Index";
    var mkdocs_page_input_path = "index.md";
    var mkdocs_page_url = "/atc/ipm-on-azure/docs/aro/";
  </script>
  
  <script src="js/jquery-2.1.1.min.js" defer></script>
  <script src="js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href="." class="icon icon-home"> IPM on Azure</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="./search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul class="current">
                    <li class="toctree-l1 current"><a class="reference internal current" href=".">Index</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#draft">[DRAFT]</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#introduction">Introduction</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#azure">Azure</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#openshift-container-platform">OpenShift Container Platform</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#azure-red-hat-openshift">Azure Red Hat OpenShift</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#ibm-product-master">IBM Product Master</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#usage">Usage</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#detailed-description">Detailed Description</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#references">Reference(s)</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#commands">Command(s)</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#example-output">Example Output</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#1-setup-azure-tenant">1 - Setup Azure Tenant</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#11-create-microsoft-account">1.1 - Create Microsoft Account</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#12-create-global-administrator">1.2 - Create Global Administrator</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#13-verify-admin-center-access">1.3 - Verify Admin Center Access</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#14-verify-aad-license">1.4 - Verify AAD License</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#2-setup-azure-subscription">2 - Setup Azure Subscription</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#21-create-azure-subscription">2.1 - Create Azure Subscription</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#3-setup-linux-operating-system">3 - Setup Linux Operating System</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#31-verify-operating-system">3.1 - Verify Operating System</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#32-verify-gnu-bash">3.2 - Verify GNU bash</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#33-verify-gnu-awk">3.3 - Verify GNU awk</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#34-verify-gnu-coreutils">3.4 - Verify GNU coreutils</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#35-verify-gnu-grep">3.5 - Verify GNU grep</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#36-verify-gnu-wget">3.6 - Verify GNU wget</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#37-verify-browser">3.7 - Verify Browser</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#38-verify-openssl">3.8 - Verify OpenSSL</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#4-setup-environment-variables">4 - Setup Environment Variables</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#41-unset-environment-variables">4.1 - Unset Environment Variables</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#42-set-environment-variables">4.2 - Set Environment Variables</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#43-verify-environment-variables">4.3 - Verify Environment Variables</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#5-setup-required-directories">5 - Setup Required Directories</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#51-create-required-directories">5.1 - Create Required Directories</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#52-verify-required-directories">5.2 - Verify Required Directories</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#6-setup-azure-cli">6 - Setup Azure CLI</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#61-install-azure-cli">6.1 - Install Azure CLI</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#62-subscription-owner-login">6.2 - Subscription Owner Login</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#63-verify-azure-tenant">6.3 - Verify Azure Tenant</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#64-set-default-subscription">6.4 - Set Default Subscription</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#65-verify-default-subscription">6.5 - Verify Default Subscription</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#7-setup-subscription-owners">7 - Setup Subscription Owners</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#71-create-subscription-owners">7.1 - Create Subscription Owners</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#72-verify-subscription-owners">7.2 - Verify Subscription Owners</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#8-verify-azure-subscription">8 - Verify Azure Subscription</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#81-verify-subscription-name">8.1 - Verify Subscription Name</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#82-verify-subscription-id">8.2 - Verify Subscription ID</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#83-verify-subscription-location">8.3 - Verify Subscription Location</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#84-verify-subscription-limits">8.4 - Verify Subscription Limits</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#85-verify-subscription-quotas">8.5 - Verify Subscription Quotas</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#86-standard-dsv3-family-vcpus">8.6 - Standard DSv3 Family vCPUs</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#87-standard-dv2-family-vcpus">8.7 - Standard Dv2 Family vCPUs</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#9-setup-openshift-administrators">9 - Setup OpenShift Administrators</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#91-create-administrator-accounts">9.1 - Create Administrator Accounts</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#92-verify-administrator-accounts">9.2 - Verify Administrator Accounts</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#93-create-administrator-roles">9.3 - Create Administrator Roles</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#94-verify-administrator-roles">9.4 - Verify Administrator Roles</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#10-setup-resource-providers">10 - Setup Resource Providers</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#101-register-provider-microsoftcompute">10.1 - Register Provider Microsoft.Compute</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#102-verify-provider-microsoftcompute">10.2 - Verify Provider Microsoft.Compute</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#103-register-provider-microsoftredhatopenshift">10.3 - Register Provider Microsoft.RedHatOpenShift</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#104-verify-provider-microsoftredhatopenshift">10.4 - Verify Provider Microsoft.RedHatOpenShift</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#105-register-provider-microsoftstorage">10.5 - Register Provider Microsoft.Storage</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#106-verify-provider-microsoftstorage">10.6 - Verify Provider Microsoft.Storage</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#11-setup-resource-group">11 - Setup Resource Group</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#111-create-resource-group">11.1 - Create Resource Group</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#112-verify-resource-group">11.2 - Verify Resource Group</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#12-setup-virtual-network">12 - Setup Virtual Network</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#121-create-virtual-network">12.1 - Create Virtual Network</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#122-verify-virtual-network">12.2 - Verify Virtual Network</a>
    </li>
        </ul>
    </li>
    </ul>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="tldr/">TL;DR</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="about/">About</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="wip/">WIP</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href=".">IPM on Azure</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".">Docs</a> &raquo;</li>
    
      
    
    <li>Index</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <p style="text-align: right"><img align="center" src="img/mit.png"></p>

<p>&nbsp;</p>
<h1 id="azure-red-hat-openshift-for-ibm-product-master">Azure Red Hat OpenShift for IBM Product Master</h1>
<h3 id="draft">[DRAFT]</h3>
<p><em>This document is functional, though still in active development and undergoing frequent changes.</em></p>
<p><em>Revision: Wed 23 Sep 2020 10:08:41 AM EDT</em>
&nbsp;<br></p>
<h3 id="introduction">Introduction</h3>
<p>This document details the steps required to automate the build of a secure, private Azure Red Hat OpenShift v4.x (ARO) infrastructure for IBM Product Master v12.x.</p>
<p>The procedure to install IBM Product Master is an accompanying document.</p>
<h4 id="azure">Azure</h4>
<p>Microsoft Azure is a comprehensive cloud computing service managed by Microsoft. It provides software as a service (SaaS), platform as a service (PaaS), and infrastructure as a service (IaaS).</p>
<h4 id="openshift-container-platform">OpenShift Container Platform</h4>
<p>Red Hat's OpenShift Container Platform (OCP) is a hybrid cloud, enterprise Kubernetes application platform.  It is a platform as a service (Paas) built on Red Hat Enterprise Linux (RHEL), with Docker containers managed by Kubernetes.</p>
<h4 id="azure-red-hat-openshift">Azure Red Hat OpenShift</h4>
<p>Azure Red Hat OpenShift (ARO) is a fully managed offering of Red Hat OpenShift running in Microsoft Azure. This service is jointly managed and supported by both Microsoft and Red Hat.  For more details, see the Azure Red Hat OpenShift Service documentation.</p>
<h4 id="ibm-product-master">IBM Product Master</h4>
<p>IBM Product Master (IPM) provides trusted Product Information Management (PIM) and collaborative Master Data Management (MDM) capabilities. It creates an accurate and up-to-date repository of product and service information that can be used throughout organizations for strategic business initiatives</p>
<p><strong><em>Reference(s):</em></strong></p>
<ul>
<li><a href="https://www.openshift.com/blog/introducing-azure-red-hat-openshift-on-openshift-4">https://www.openshift.com/blog/introducing-azure-red-hat-openshift-on-openshift-4</a></li>
<li><a href="https://docs.openshift.com/aro/4/architecture/architecture.html">https://docs.openshift.com/aro/4/architecture/architecture.html</a></li>
<li><a href="https://azure.microsoft.com/">https://azure.microsoft.com/</a></li>
<li><a href="https://www.openshift.com/">https://www.openshift.com/</a></li>
<li><a href="https://www.docker.com/">https://www.docker.com/</a></li>
<li><a href="https://kubernetes.io/">https://kubernetes.io/</a></li>
<li><a href="https://docs.microsoft.com/en-us/azure/openshift/openshift-faq">https://docs.microsoft.com/en-us/azure/openshift/openshift-faq</a></li>
<li><a href="https://docs.microsoft.com/en-us/azure/openshift/support-lifecycle">https://docs.microsoft.com/en-us/azure/openshift/support-lifecycle</a></li>
<li><a href="https://www.ibm.com/products/product-master">https://www.ibm.com/products/product-master</a></li>
</ul>
<h3 id="usage">Usage</h3>
<p>This document follows a step-by-step approach.</p>
<p><strong><em>Each step is dependent upon the successful completion of previous steps.</em></strong></p>
<p>The steps are structured and all follow this same pattern.</p>
<h4 id="detailed-description">Detailed Description</h4>
<ul>
<li>Many steps will have a detailed description that will provide additional context.  In the interest of brevity, not all steps will have detailed descriptions.</li>
</ul>
<h4 id="references">Reference(s)</h4>
<ul>
<li>Most steps will have relevant, linked references.  All references given are to the official supporting documentation.</li>
</ul>
<h4 id="commands">Command(s)</h4>
<ul>
<li>These are the bash commands that must be run.  The expectation is that they will be copy/paste.  For that reason, the majority of commands rely on pre-set environment variables.  The environment variables provide for portability, flexibility, and a consistent experience.  If there are problems running any commands then it's most likely the environment variables are incorrect.</li>
</ul>
<h4 id="example-output">Example Output</h4>
<ul>
<li>When there is output from a command, the example output will be given.  Please compare the outputs to ensure consistency.  It may be helpful.</li>
</ul>
<h3 id="1-setup-azure-tenant">1 - Setup Azure Tenant</h3>
<p>A tenant is Microsoft's representation of an organization.  It is a dedicated instance of Azure Active Directory (AAD) that is received when creating a new relationship with Microsoft, like signing up for Azure, Microsoft Intune, or Microsoft 365.</p>
<p>Before Azure Red Hat OpenShift (ARO) can be installed, Microsoft accounts must exist and have appropriate access to an AAD tenant with an AAD Premium P1 License or better.  A Global Administrator must be involved in the project.</p>
<p>If you are the Global Administrator of an existing tenant, go to step 2.</p>
<p><strong><em>Reference(s):</em></strong></p>
<ul>
<li><a href="https://docs.microsoft.com/en-us/azure/active-directory/fundamentals/active-directory-get-started-premium">https://docs.microsoft.com/en-us/azure/active-directory/fundamentals/active-directory-get-started-premium</a></li>
<li><a href="https://docs.microsoft.com/en-us/azure/active-directory/develop/quickstart-create-new-tenant">https://docs.microsoft.com/en-us/azure/active-directory/develop/quickstart-create-new-tenant</a></li>
</ul>
<h4 id="11-create-microsoft-account">1.1 - Create Microsoft Account</h4>
<p>A Microsoft account represents a billing relationship.  The account consists of a user identity, one or more subscriptions, and an associated set of resources. The person who creates the account is the administrator for all subscriptions created in that account. That person is also the default Service Administrator for the subscription(s) and, for Microsoft 365, possesses the Global Administrator role.</p>
<p>The purpose of this step is to create a new Microsoft 365 (onmicrosoft.com) account, to establish a Global Administrator relationship for use with all Microsoft services, including Azure.  An Azure tenant with an <em>Active Directory Premium P1</em> license is required.</p>
<p>Please note that <em>this step does not mandate a purchase of a Microsoft 365 Business Premium license</em>.   This is simply one way to create a new tenant and become a Global Administrator.  Licenses may be purchased now, or later.</p>
<p>Go to the Microsoft 365 store.  A credit card will not be required at this time.</p>
<ul>
<li><a href="https://www.microsoft.com/microsoft-365">https://www.microsoft.com/microsoft-365</a></li>
</ul>
<p>Proceed to purchase at least one (1) Microsoft 365 Business Premium license.  This will also include an Azure Active Directory (AAD) Premium P1 license, which is needed for Azure Red Hat OpenShift (ARO).</p>
<p>The Microsoft 365 Business Premium provides an AAD P1 license, and other 365 services.  However, a dedicated AAD Premium P1 (or better) may be purchased by a Billing or Global Administrator who has access to an existing tenant.</p>
<p><strong><em>Reference(s):</em></strong></p>
<ul>
<li><a href="https://support.microsoft.com/en-us/help/4558219/microsoft-account-what-is">https://support.microsoft.com/en-us/help/4558219/microsoft-account-what-is</a></li>
<li><a href="https://en.wikipedia.org/wiki/Microsoft_account">https://en.wikipedia.org/wiki/Microsoft_account</a></li>
</ul>
<h4 id="12-create-global-administrator">1.2 - Create Global Administrator</h4>
<p>The person who signed up for Microsoft online services automatically becomes the first Global Administrator.</p>
<p>Only global administrators can:</p>
<ul>
<li>Add and manage domains</li>
<li>Assign the Global Administrator role to other users</li>
<li>Reset passwords for all users</li>
</ul>
<p><strong><em>Reference(s):</em></strong></p>
<ul>
<li><a href="https://docs.microsoft.com/en-us/microsoft-365/admin/add-users/about-admin-roles?view=o365-worldwide">https://docs.microsoft.com/en-us/microsoft-365/admin/add-users/about-admin-roles?view=o365-worldwide</a></li>
</ul>
<h4 id="13-verify-admin-center-access">1.3 - Verify Admin Center Access</h4>
<p>The Microsoft 365 admin center simplifies management of Microsoft 365 services. The admin center provides a tailored experience based on the the role of the logged in user.  It is the common entry point for all administrators.</p>
<ul>
<li><a href="https://admin.microsoft.com/">https://admin.microsoft.com/</a></li>
</ul>
<p><strong><em>Reference(s):</em></strong></p>
<ul>
<li><a href="https://docs.microsoft.com/en-us/microsoft-365/admin/admin-overview/about-the-admin-center?view=o365-worldwide">https://docs.microsoft.com/en-us/microsoft-365/admin/admin-overview/about-the-admin-center?view=o365-worldwide</a></li>
</ul>
<h4 id="14-verify-aad-license">1.4 - Verify AAD License</h4>
<p>The Azure Active Directory license can be verified by visiting the Directory Overview section on the Azure Portal.</p>
<ul>
<li><a href="https://aad.portal.azure.com/#blade/Microsoft_AAD_IAM/ActiveDirectoryMenuBlade/Overview">https://aad.portal.azure.com/#blade/Microsoft_AAD_IAM/ActiveDirectoryMenuBlade/Overview</a></li>
</ul>
<p><strong><em>Reference(s):</em></strong></p>
<ul>
<li><a href="https://docs.microsoft.com/en-us/azure/active-directory/fundamentals/active-directory-whatis">https://docs.microsoft.com/en-us/azure/active-directory/fundamentals/active-directory-whatis</a></li>
</ul>
<h3 id="2-setup-azure-subscription">2 - Setup Azure Subscription</h3>
<p>An Azure subscription is a trust relationship with Azure Active Directory. A subscription trusts AAD to authenticate users, services, and devices.</p>
<p>Azure subscriptions help organize access to Azure resources. They also help control how resource usage is reported, billed, and paid for. Each subscription can have a different billing and payment method.  Every Azure service belongs to a subscription, and the subscription ID is required during the installation of ARO.</p>
<p>There are multiple choices when configuring Azure subscriptions.  A tenant may have multiple Azure subscriptions that are paid via different payment methods.  Here we will focus on a single tenant with a single subscription.</p>
<p>A Global Administrator should do the following steps, become the Subscription Owner, and then assign the appropriate subscription roles to the OpenShift Administrators.</p>
<p><strong><em>Reference(s):</em></strong></p>
<ul>
<li><a href="https://docs.microsoft.com/en-us/microsoft-365/enterprise/subscriptions-licenses-accounts-and-tenants-for-microsoft-cloud-offerings?view=o365-worldwide">https://docs.microsoft.com/en-us/microsoft-365/enterprise/subscriptions-licenses-accounts-and-tenants-for-microsoft-cloud-offerings?view=o365-worldwide</a></li>
</ul>
<h4 id="21-create-azure-subscription">2.1 - Create Azure Subscription</h4>
<p>An Azure subscription may be purchased directly from Microsoft through the Azure website, through a Microsoft representative, or as part of a managed service from a Microsoft Partner.</p>
<p>The Microsoft account that purchases the Azure subscription will be assigned the owner administrative role.</p>
<p>To learn more about the Azure purchase options, visit this link.</p>
<ul>
<li><a href="https://azure.microsoft.com/en-us/pricing/purchase-options/">https://azure.microsoft.com/en-us/pricing/purchase-options/</a></li>
</ul>
<p><strong><em>Reference(s):</em></strong></p>
<ul>
<li><a href="https://azure.microsoft.com/">https://azure.microsoft.com/</a></li>
</ul>
<h3 id="3-setup-linux-operating-system">3 - Setup Linux Operating System</h3>
<p>The ARO build procedures in this document depend on the Linux operating system and tools.  Special care has been taken to ensure the commands given will work on any GNU/Linux distribution.  As of this writing, they have been tested on Fedora 31+, Debian 9+, and Ubuntu 18+.</p>
<ul>
<li>Linux or Windows Subsystem for Linux<ul>
<li>CentOS 7+, Debian 9+, Fedora 31+, RHEL 7+, or Ubuntu 18+</li>
</ul>
</li>
<li>GNU bash</li>
<li>GNU awk (gawk)</li>
<li>GNU coreutils (sort, etc)</li>
<li>GNU grep</li>
<li>GNU wget</li>
<li>Google Chrome or Firefox</li>
<li>OpenSSL</li>
</ul>
<p><strong><em>Reference(s):</em></strong></p>
<ul>
<li><a href="https://www.gnu.org/gnu/linux-and-gnu">https://www.gnu.org/gnu/linux-and-gnu</a></li>
</ul>
<h4 id="31-verify-operating-system">3.1 - Verify Operating System</h4>
<p>This step is to verify the Operating System is GNU/Linux.</p>
<p><strong><em>Reference(s):</em></strong></p>
<ul>
<li><a href="https://man7.org/linux/man-pages/man2/uname.2.html">https://man7.org/linux/man-pages/man2/uname.2.html</a></li>
<li><a href="https://en.wikipedia.org/wiki/Uname">https://en.wikipedia.org/wiki/Uname</a></li>
</ul>
<p><strong><em>Command(s):</em></strong></p>
<pre><code class="bash">uname -a
</code></pre>

<p><strong><em>Example Output:</em></strong></p>
<pre><code>Linux jt 5.7.17-200.fc32.x86_64 #1 SMP Fri Aug 21 15:23:46 UTC 2020 x86_64 x86_64 x86_64 GNU/Linux
</code></pre>

<h4 id="32-verify-gnu-bash">3.2 - Verify GNU bash</h4>
<p><strong><em>Reference(s):</em></strong></p>
<ul>
<li><a href="https://www.man7.org/linux/man-pages/man1/bash.1.html">https://www.man7.org/linux/man-pages/man1/bash.1.html</a></li>
<li><a href="https://en.wikipedia.org/wiki/Bash_(Unix_shell)">https://en.wikipedia.org/wiki/Bash_(Unix_shell)</a></li>
<li><a href="https://www.gnu.org/software/bash/">https://www.gnu.org/software/bash/</a></li>
</ul>
<p><strong><em>Command(s):</em></strong></p>
<pre><code class="bash">bash --version
</code></pre>

<p><strong><em>Example Output:</em></strong></p>
<pre><code>GNU bash, version 5.0.17(1)-release (x86_64-redhat-linux-gnu)
Copyright (C) 2019 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later &lt;http://gnu.org/licenses/gpl.html&gt;

This is free software; you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.
</code></pre>

<h4 id="33-verify-gnu-awk">3.3 - Verify GNU awk</h4>
<p><strong><em>Reference(s):</em></strong></p>
<ul>
<li><a href="https://man7.org/linux/man-pages/man1/awk.1p.html">https://man7.org/linux/man-pages/man1/awk.1p.html</a></li>
<li><a href="https://en.wikipedia.org/wiki/AWK">https://en.wikipedia.org/wiki/AWK</a></li>
<li><a href="https://www.gnu.org/software/gawk/">https://www.gnu.org/software/gawk/</a></li>
</ul>
<p><strong><em>Command(s):</em></strong></p>
<pre><code class="bash">awk --version
</code></pre>

<p><strong><em>Example Output:</em></strong></p>
<pre><code>GNU Awk 5.0.1, API: 3.0 (GNU MPFR 4.0.2-p9, GNU MP 6.1.2)
Copyright (C) 1989, 1991-2019 Free Software Foundation.

This program is free software; you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation; either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program. If not, see http://www.gnu.org/licenses/.
</code></pre>

<h4 id="34-verify-gnu-coreutils">3.4 - Verify GNU coreutils</h4>
<p><strong><em>Reference(s):</em></strong></p>
<ul>
<li><a href="https://www.gnu.org/software/coreutils/">https://www.gnu.org/software/coreutils/</a></li>
<li><a href="https://en.wikipedia.org/wiki/GNU_Core_Utilities">https://en.wikipedia.org/wiki/GNU_Core_Utilities</a></li>
</ul>
<p><strong><em>Command(s):</em></strong></p>
<pre><code class="bash">base64 --version
basename --version
dirname --version
sort --version
head --version
tail --version
</code></pre>

<p><strong><em>Example Output:</em></strong></p>
<pre><code>base64 (GNU coreutils) 8.32
Copyright (C) 2020 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later &lt;https://gnu.org/licenses/gpl.html&gt;.
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.

Written by Simon Josefsson.
</code></pre>

<pre><code>basename (GNU coreutils) 8.32
Copyright (C) 2020 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later &lt;https://gnu.org/licenses/gpl.html&gt;.
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.

Written by David MacKenzie.
</code></pre>

<pre><code>dirname (GNU coreutils) 8.32
Copyright (C) 2020 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later &lt;https://gnu.org/licenses/gpl.html&gt;.
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.

Written by David MacKenzie and Jim Meyering.
</code></pre>

<pre><code>sort (GNU coreutils) 8.32
Copyright (C) 2020 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later &lt;https://gnu.org/licenses/gpl.html&gt;.
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.

Written by Mike Haertel and Paul Eggert.
</code></pre>

<pre><code>head (GNU coreutils) 8.32
Copyright (C) 2020 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later &lt;https://gnu.org/licenses/gpl.html&gt;.
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.

Written by David MacKenzie and Jim Meyering.
</code></pre>

<pre><code>tail (GNU coreutils) 8.32
Copyright (C) 2020 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later &lt;https://gnu.org/licenses/gpl.html&gt;.
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.

Written by Paul Rubin, David MacKenzie, Ian Lance Taylor,
and Jim Meyering.
</code></pre>

<h4 id="35-verify-gnu-grep">3.5 - Verify GNU grep</h4>
<p><strong><em>Reference(s):</em></strong></p>
<ul>
<li><a href="https://man7.org/linux/man-pages/man1/grep.1.html">https://man7.org/linux/man-pages/man1/grep.1.html</a></li>
<li><a href="https://en.wikipedia.org/wiki/Grep">https://en.wikipedia.org/wiki/Grep</a></li>
<li><a href="https://www.gnu.org/software/grep/">https://www.gnu.org/software/grep/</a></li>
</ul>
<p><strong><em>Command(s):</em></strong></p>
<pre><code class="bash">egrep --version
</code></pre>

<p><strong><em>Example Output:</em></strong></p>
<pre><code>grep (GNU grep) 3.3
Copyright (C) 2018 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later &lt;https://gnu.org/licenses/gpl.html&gt;.
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.

Written by Mike Haertel and others; see
&lt;https://git.sv.gnu.org/cgit/grep.git/tree/AUTHORS&gt;.
</code></pre>

<h4 id="36-verify-gnu-wget">3.6 - Verify GNU wget</h4>
<p><strong><em>Reference(s):</em></strong></p>
<ul>
<li><a href="https://man7.org/linux/man-pages/man1/wget.1.html">https://man7.org/linux/man-pages/man1/wget.1.html</a></li>
<li><a href="https://en.wikipedia.org/wiki/Wget">https://en.wikipedia.org/wiki/Wget</a></li>
<li><a href="https://www.gnu.org/software/wget/">https://www.gnu.org/software/wget/</a></li>
</ul>
<p><strong><em>Command(s):</em></strong></p>
<pre><code class="bash">wget --version
</code></pre>

<p><strong><em>Example Output:</em></strong></p>
<pre><code>GNU Wget 1.20.3 built on linux-gnu.

-cares +digest +gpgme +https +ipv6 +iri +large-file +metalink +nls 
+ntlm +opie +psl +ssl/gnutls 

Wgetrc: 
    /etc/wgetrc (system)
Locale: 
    /usr/share/locale 
Compile: 
    gcc -DHAVE_CONFIG_H -DSYSTEM_WGETRC=&quot;/etc/wgetrc&quot; 
    -DLOCALEDIR=&quot;/usr/share/locale&quot; -I. -I../lib -I../lib 
    -I/usr/include/p11-kit-1 -DHAVE_LIBGNUTLS -DNDEBUG -O2 -g -pipe 
    -Wall -Werror=format-security -Wp,-D_FORTIFY_SOURCE=2 
    -Wp,-D_GLIBCXX_ASSERTIONS -fexceptions -fstack-protector-strong 
    -grecord-gcc-switches 
    -specs=/usr/lib/rpm/redhat/redhat-hardened-cc1 
    -specs=/usr/lib/rpm/redhat/redhat-annobin-cc1 -m64 -mtune=generic 
    -fasynchronous-unwind-tables -fstack-clash-protection 
    -fcf-protection 
Link: 
    gcc -I/usr/include/p11-kit-1 -DHAVE_LIBGNUTLS -DNDEBUG -O2 -g -pipe 
    -Wall -Werror=format-security -Wp,-D_FORTIFY_SOURCE=2 
    -Wp,-D_GLIBCXX_ASSERTIONS -fexceptions -fstack-protector-strong 
    -grecord-gcc-switches 
    -specs=/usr/lib/rpm/redhat/redhat-hardened-cc1 
    -specs=/usr/lib/rpm/redhat/redhat-annobin-cc1 -m64 -mtune=generic 
    -fasynchronous-unwind-tables -fstack-clash-protection 
    -fcf-protection -Wl,-z,relro -Wl,--as-needed -Wl,-z,now 
    -specs=/usr/lib/rpm/redhat/redhat-hardened-ld -lmetalink -lpcre2-8 
    -luuid -lidn2 -lnettle -lgnutls -lz -lpsl -L/usr/lib64 -lgpgme 
    ftp-opie.o gnutls.o http-ntlm.o ../lib/libgnu.a 

Copyright (C) 2015 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later
&lt;http://www.gnu.org/licenses/gpl.html&gt;.
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.

Originally written by Hrvoje Niksic &lt;hniksic@xemacs.org&gt;.
Please send bug reports and questions to &lt;bug-wget@gnu.org&gt;.
</code></pre>

<h4 id="37-verify-browser">3.7 - Verify Browser</h4>
<p><strong><em>Reference(s):</em></strong></p>
<ul>
<li><a href="https://www.mozilla.org/">https://www.mozilla.org/</a></li>
<li><a href="https://www.google.com/chrome/">https://www.google.com/chrome/</a></li>
</ul>
<p><strong><em>Command(s):</em></strong></p>
<pre><code class="bash">firefox --version
google-chrome --version
</code></pre>

<p><strong><em>Example Output:</em></strong></p>
<pre><code>Mozilla Firefox 80.0
</code></pre>

<pre><code>Google Chrome 85.0.4183.83 
</code></pre>

<h4 id="38-verify-openssl">3.8 - Verify OpenSSL</h4>
<p><strong><em>Reference(s):</em></strong></p>
<ul>
<li><a href="https://www.openssl.org/">https://www.openssl.org/</a></li>
</ul>
<p><strong><em>Command(s):</em></strong></p>
<pre><code class="bash">openssl version
</code></pre>

<p><strong><em>Example Output:</em></strong></p>
<pre><code>OpenSSL 1.1.1g FIPS  21 Apr 2020
</code></pre>

<h3 id="4-setup-environment-variables">4 - Setup Environment Variables</h3>
<p><strong><em>This step is most important.</em></strong></p>
<p>The other steps in this document will <em>not</em> work unless the bash shell environment is properly setup.</p>
<p>There are many prerequisites for a successful installation of Azure Red Hat OpenShift.  The necessary bash environment variables are required to execute the steps in this document.  The environment variables must be exported.</p>
<p><em>Before proceeding</em>, please <em>take your time</em> ensuring the environment variable values are correct.</p>
<p><strong><em>Reference(s):</em></strong></p>
<ul>
<li><a href="https://www.gnu.org/software/bash/manual/html_node/Environment.html">https://www.gnu.org/software/bash/manual/html_node/Environment.html</a></li>
</ul>
<h4 id="41-unset-environment-variables">4.1 - Unset Environment Variables</h4>
<p>Unsetting the ARO environment variables can help prevent issues when, or if they have changed.</p>
<p><strong><em>Reference(s):</em></strong></p>
<ul>
<li><a href="https://www.gnu.org/software/bash/manual/html_node/Environment.html">https://www.gnu.org/software/bash/manual/html_node/Environment.html</a></li>
</ul>
<p><strong><em>Command(s):</em></strong></p>
<pre><code class="bash">for ARO in $(env | grep ^ARO | awk -F= &quot;{print \$1}&quot; | sort -V); do echo unset $ARO; unset $ARO; done
</code></pre>

<p><strong><em>Example Output:</em></strong></p>
<pre><code>unset ARO
unset ARO_ADMINISTRATORS_GROUP_NAME
unset ARO_APPLICATION_NAME
unset ARO_CLUSTER_NAME
unset ARO_DOMAIN_NAME
unset ARO_LOCATION_NAME
unset ARO_REDHAT_PULL_SECRET_DIR
unset ARO_REDHAT_PULL_SECRET_FILE
unset ARO_RESOURCE_GROUP_NAME
unset ARO_SERVICE_PRINCIPAL_NAME
unset ARO_SERVICE_PRINCIPAL_PASSWORD
unset ARO_SUBDOMAIN_NAME
unset ARO_SUBNET_AGW_ADDRESS_PREFIX
unset ARO_SUBNET_AGW_NAME
unset ARO_SUBNET_AGW_NSG_NAME
unset ARO_SUBNET_DB_ADDRESS_PREFIX
unset ARO_SUBNET_DB_NAME
unset ARO_SUBNET_DB_NSG_NAME
unset ARO_SUBNET_DMZ_ADDRESS_PREFIX
unset ARO_SUBNET_DMZ_NAME
unset ARO_SUBNET_DMZ_NSG_NAME
unset ARO_SUBNET_MASTER_ADDRESS_PREFIX
unset ARO_SUBNET_MASTER_NAME
unset ARO_SUBNET_MASTER_NSG_NAME
unset ARO_SUBNET_TRUSTED_ADDRESS_PREFIX
unset ARO_SUBNET_TRUSTED_NAME
unset ARO_SUBNET_TRUSTED_NSG_NAME
unset ARO_SUBNET_VGW_ADDRESS_PREFIX
unset ARO_SUBNET_VGW_NAME
unset ARO_SUBNET_VGW_NSG_NAME
unset ARO_SUBNET_WORKER_ADDRESS_PREFIX
unset ARO_SUBNET_WORKER_NAME
unset ARO_SUBNET_WORKER_NSG_NAME
unset ARO_SUBSCRIPTION_ID
unset ARO_SUBSCRIPTION_NAME
unset ARO_TENANT_ID
unset ARO_TENANT_NAME
unset ARO_VGW_NAME
unset ARO_VGW_PKI_BITS
unset ARO_VGW_PKI_CLIENT
unset ARO_VGW_PKI_CLIENT_CRT_FILE
unset ARO_VGW_PKI_CLIENT_EXT_FILE
unset ARO_VGW_PKI_CLIENT_KEY_FILE
unset ARO_VGW_PKI_CLIENT_KEY_FILE_PASSPHRASE
unset ARO_VGW_PKI_CLIENT_NAME
unset ARO_VGW_PKI_CLIENT_PFX_FILE
unset ARO_VGW_PKI_CLIENT_REQ_FILE
unset ARO_VGW_PKI_CLIENT_SERIAL_FILE
unset ARO_VGW_PKI_DIR
unset ARO_VGW_PKI_ROOT_CA_SERIAL_FILE
unset ARO_VGW_PKI_ROOT_CRT_FILE
unset ARO_VGW_PKI_ROOT_CRT_FILE_NAME
unset ARO_VGW_PKI_ROOT_KEY_FILE
unset ARO_VGW_PKI_ROOT_KEY_FILE_NAME
unset ARO_VGW_PKI_ROOT_KEY_FILE_PASSPHRASE
unset ARO_VGW_POOL_ADDRESS_PREFIX
unset ARO_VGW_PUBLIC_ADDRESS_NAME
unset ARO_VGW_REDUNDANCY
unset ARO_VGW_SKU
unset ARO_VGW_TYPE
unset ARO_VM_JUMP_ADMIN_NAME
unset ARO_VM_JUMP_IMAGE_MARKETPLACE
unset ARO_VM_JUMP_IMAGE_URN
unset ARO_VM_JUMP_NAME
unset ARO_VM_JUMP_PUBLIC_ADDRESS_NAME
unset ARO_VM_JUMP_SIZE
unset ARO_VNET_ADDRESS_PREFIX
unset ARO_VNET_NAME
</code></pre>

<h4 id="42-set-environment-variables">4.2 - Set Environment Variables</h4>
<p>Many bash shell environment variables are required.  They are reused for multiple steps.</p>
<p>It is recommended that the environment variables be maintained in a configuration file, i.e. <strong><em>ipm.env</em></strong></p>
<p>Maintaining the variables in a configuration file will make them easier to use and update.</p>
<p><em>These are example values that should be changed for this installation.</em></p>
<p><strong><em>Reference(s):</em></strong></p>
<ul>
<li><a href="https://www.gnu.org/software/bash/manual/html_node/Environment.html">https://www.gnu.org/software/bash/manual/html_node/Environment.html</a></li>
</ul>
<p><strong><em>Command(s):</em></strong></p>
<pre><code class="bash">cat &quot;ipm.env&quot; &amp;&amp; source &quot;ipm.env&quot;
</code></pre>

<p><strong><em>Example Output:</em></strong></p>
<pre><code># NOTE:
#
# These variables may be set statically or dynamically.
#
# This example shows dynamic variables.  In this case, the order of variables is important
# because many values rely on the value of another variable.
#
# Please check, and double check the values.  Each of these are required.

export ARO=ipm
export ARO_ADMINISTRATORS_GROUP_NAME=&quot;OpenShift Administrators&quot;
export ARO_APPLICATION_NAME=${ARO}-app
export ARO_CLUSTER_NAME=${ARO}-cluster
export ARO_DOMAIN_NAME=mitaei.net
export ARO_SUBDOMAIN_NAME=${ARO}.${ARO_DOMAIN_NAME}
export ARO_LOCATION_NAME=eastus # region
export ARO_REDHAT_PULL_SECRET_DIR=&quot;${PWD}/secrets&quot;
export ARO_REDHAT_PULL_SECRET_FILE=&quot;${ARO_REDHAT_PULL_SECRET_DIR}/${ARO}-redhat-pull-secret.txt&quot;
export ARO_RESOURCE_GROUP_NAME=&quot;${ARO}-${ARO_LOCATION_NAME}&quot;
export ARO_SERVICE_PRINCIPAL_NAME=&quot;http://${ARO_APPLICATION_NAME}&quot;
export ARO_SERVICE_PRINCIPAL_PASSWORD=&quot;S3rv1c3Pr1cip4lP4ssw0rd!&quot;
export ARO_SUBSCRIPTION_ID=$(az account show --query 'id' --output tsv 2&gt; /dev/null)
export ARO_SUBSCRIPTION_NAME=&quot;Azure subscription for mitaei&quot;
export ARO_TENANT_ID=$(az account show --query 'tenantId' --output tsv 2&gt; /dev/null)
export ARO_TENANT_NAME=mitaei.net
export ARO_VNET_ADDRESS_PREFIX=10.11.0.0/21
export ARO_VNET_NAME=${ARO}-vnet

# ARO subnets: MASTER, WORKER
export ARO_SUBNET_MASTER_ADDRESS_PREFIX=10.11.0.0/23
export ARO_SUBNET_MASTER_NAME=${ARO_VNET_NAME}-master-subnet
export ARO_SUBNET_MASTER_NSG_NAME=${ARO_SUBNET_MASTER_NAME}-nsg
export ARO_SUBNET_WORKER_ADDRESS_PREFIX=10.11.2.0/23
export ARO_SUBNET_WORKER_NAME=${ARO_VNET_NAME}-worker-subnet
export ARO_SUBNET_WORKER_NSG_NAME=${ARO_SUBNET_WORKER_NAME}-nsg

# non-ARO subnets AGW, DB, DMZ, TRUSTED, VPN (GatewaySubnet)
export ARO_SUBNET_AGW_ADDRESS_PREFIX=10.11.4.0/25
export ARO_SUBNET_AGW_NAME=${ARO_VNET_NAME}-agw-subnet
export ARO_SUBNET_AGW_NSG_NAME=${ARO_SUBNET_AGW_NAME}-nsg
export ARO_SUBNET_DB_ADDRESS_PREFIX=10.11.4.128/25
export ARO_SUBNET_DB_NAME=${ARO_VNET_NAME}-db-subnet
export ARO_SUBNET_DB_NSG_NAME=${ARO_SUBNET_DB_NAME}-nsg
export ARO_SUBNET_DMZ_ADDRESS_PREFIX=10.11.5.0/25
export ARO_SUBNET_DMZ_NAME=${ARO_VNET_NAME}-dmz-subnet
export ARO_SUBNET_DMZ_NSG_NAME=${ARO_SUBNET_DMZ_NAME}-nsg
export ARO_SUBNET_TRUSTED_ADDRESS_PREFIX=10.11.5.128/25
export ARO_SUBNET_TRUSTED_NAME=${ARO_VNET_NAME}-trusted-subnet
export ARO_SUBNET_TRUSTED_NSG_NAME=${ARO_SUBNET_TRUSTED_NAME}-nsg
export ARO_SUBNET_VGW_ADDRESS_PREFIX=10.11.6.0/25
export ARO_SUBNET_VGW_NAME=GatewaySubnet # this MUST be named GatewaySubnet
export ARO_SUBNET_VGW_NSG_NAME=${ARO_SUBNET_VGW_NAME}-nsg # this can't be used?

# VPN Gateway (P2S)
export ARO_VGW_NAME=${ARO}-vpn
export ARO_VGW_PKI_DIR=&quot;${PWD}/pki&quot;
export ARO_VGW_PKI_BITS=2048
export ARO_VGW_PKI_CLIENT='example'
export ARO_VGW_PKI_CLIENT_NAME=&quot;${ARO_VGW_NAME}-client-${ARO_VGW_PKI_CLIENT}&quot;
export ARO_VGW_PKI_CLIENT_CRT_FILE=&quot;${ARO_VGW_PKI_DIR}/${ARO_VGW_PKI_CLIENT_NAME}.crt&quot;
export ARO_VGW_PKI_CLIENT_EXT_FILE=&quot;${ARO_VGW_PKI_DIR}/${ARO_VGW_PKI_CLIENT_NAME}.ext&quot;
export ARO_VGW_PKI_CLIENT_KEY_FILE=&quot;${ARO_VGW_PKI_DIR}/${ARO_VGW_PKI_CLIENT_NAME}.key&quot;
export ARO_VGW_PKI_CLIENT_KEY_FILE_PASSPHRASE='!'&quot;${ARO_VGW_PKI_CLIENT}&quot;'!'
export ARO_VGW_PKI_CLIENT_PFX_FILE=&quot;${ARO_VGW_PKI_DIR}/${ARO_VGW_PKI_CLIENT_NAME}.pfx&quot;
export ARO_VGW_PKI_CLIENT_REQ_FILE=&quot;${ARO_VGW_PKI_DIR}/${ARO_VGW_PKI_CLIENT_NAME}.req&quot;
export ARO_VGW_PKI_CLIENT_SERIAL_FILE=&quot;${ARO_VGW_PKI_DIR}/${ARO_VGW_PKI_CLIENT_NAME}.serial&quot;
export ARO_VGW_PKI_ROOT_CA_SERIAL_FILE=&quot;${ARO_VGW_PKI_DIR}/${ARO_VGW_NAME}-root.serial&quot;
export ARO_VGW_PKI_ROOT_CRT_FILE=&quot;${ARO_VGW_PKI_DIR}/${ARO_VGW_PKI_ROOT_CRT_FILE_NAME}&quot;
export ARO_VGW_PKI_ROOT_CRT_FILE_NAME=&quot;${ARO_VGW_NAME}-root.crt&quot;
export ARO_VGW_PKI_ROOT_KEY_FILE=&quot;${ARO_VGW_PKI_DIR}/${ARO_VGW_PKI_ROOT_KEY_FILE_NAME}&quot;
export ARO_VGW_PKI_ROOT_KEY_FILE_NAME=&quot;${ARO_VGW_NAME}-root.key&quot;
export ARO_VGW_PKI_ROOT_KEY_FILE_PASSPHRASE=&quot;Pk1P4ssphr4s3!!&quot;
export ARO_VGW_POOL_ADDRESS_PREFIX=172.16.11.0/24
export ARO_VGW_PUBLIC_ADDRESS_NAME=${ARO_VGW_NAME}-public-ip
export ARO_VGW_REDUNDANCY=true # more costly; set to false for lower environments
export ARO_VGW_SKU=&quot;VpnGw1&quot; # Not Redundant; reverse the order for redundant
export ARO_VGW_SKU=&quot;VpnGw1AZ&quot; # Redundant; reverse the order for not redundant
export ARO_VGW_TYPE=RouteBased

# Additonal, non_ARO VMs
export ARO_VM_JUMP_NAME=${ARO}-vm-jumpbox
export ARO_VM_JUMP_ADMIN_NAME=${ARO_VM_JUMP_NAME}-admin
export ARO_VM_JUMP_IMAGE_MARKETPLACE=true
export ARO_VM_JUMP_IMAGE_URN=&quot;cognosys:docker-ce-with-centos-8-0-free:docker-ce-with-centos-8-0-free:1.2019.0710&quot;
#export ARO_VM_JUMP_IP=$(az vm show -d -g ${ARO_RESOURCE_GROUP_NAME} -n ${ARO_VM_JUMP_NAME} --query publicIps -o tsv)
export ARO_VM_JUMP_PUBLIC_ADDRESS_NAME=${ARO_VM_JUMP_NAME}-public-ip
export ARO_VM_JUMP_SIZE=&quot;Standard_B1ms&quot;

#
# arrays
#

# Microsoft account UPNs for the OpenShift Administrators
export ARO_ADMINISTRATORS=()
export ARO_ADMINISTRATORS+=(openshift-admin@mitaei.net)
export ARO_ADMINISTRATORS+=(arun.babu@mitaei.net)
export ARO_ADMINISTRATORS+=(joseph.tingiris@mitaei.net)
export ARO_ADMINISTRATORS+=(sivaprasad.k@mitaei.net)

# Microsoft Resource Providers needed for ARO
export ARO_RESOURCE_PROVIDERS=()
export ARO_RESOURCE_PROVIDERS+=(Microsoft.Compute)
export ARO_RESOURCE_PROVIDERS+=(Microsoft.RedHatOpenShift)
export ARO_RESOURCE_PROVIDERS+=(Microsoft.Storage)

# Microsoft account UPNs for who will be made Azure Subscription Owners
export ARO_SUBSCRIPTION_OWNERS=()
export ARO_SUBSCRIPTION_OWNERS+=(christy.walsh@mitaei.net)
export ARO_SUBSCRIPTION_OWNERS+=(joseph.tingiris@mitaei.net)

# Microsoft VM Family Quotas that will be verified (to have enough vCPUs for ARO)
export ARO_VERIFY_QUOTA_NAMES=()
export ARO_VERIFY_QUOTA_NAMES+=('Standard DSv3 Family vCPUs')
export ARO_VERIFY_QUOTA_NAMES+=('Standard Dv2 Family vCPUs')
</code></pre>

<h4 id="43-verify-environment-variables">4.3 - Verify Environment Variables</h4>
<p>Ensure the ARO variables are avaialble in the bash shell environment that you're working in.</p>
<p><strong><em>Reference(s):</em></strong></p>
<ul>
<li><a href="https://man7.org/linux/man-pages/man1/env.1.html">https://man7.org/linux/man-pages/man1/env.1.html</a></li>
</ul>
<p><strong><em>Command(s):</em></strong></p>
<pre><code class="bash">env | grep ^ARO | sort -V
</code></pre>

<p><strong><em>Example Output:</em></strong></p>
<pre><code class="bash">ARO=ipm
ARO_ADMINISTRATORS_GROUP_NAME=OpenShift Administrators
ARO_APPLICATION_NAME=ipm-app
ARO_CLUSTER_NAME=ipm-cluster
ARO_DOMAIN_NAME=mitaei.net
ARO_LOCATION_NAME=eastus
ARO_REDHAT_PULL_SECRET_DIR=/home/jtingiris/prj/mit/aei/secrets
ARO_REDHAT_PULL_SECRET_FILE=/home/jtingiris/prj/mit/aei/secrets/ipm-redhat-pull-secret.txt
ARO_RESOURCE_GROUP_NAME=ipm-eastus
ARO_SERVICE_PRINCIPAL_NAME=http://ipm-app
ARO_SERVICE_PRINCIPAL_PASSWORD=S3rv1c3Pr1cip4lP4ssw0rd!
ARO_SUBDOMAIN_NAME=ipm.mitaei.net
ARO_SUBNET_AGW_ADDRESS_PREFIX=10.11.4.0/25
ARO_SUBNET_AGW_NAME=ipm-vnet-agw-subnet
ARO_SUBNET_AGW_NSG_NAME=ipm-vnet-agw-subnet-nsg
ARO_SUBNET_DB_ADDRESS_PREFIX=10.11.4.128/25
ARO_SUBNET_DB_NAME=ipm-vnet-db-subnet
ARO_SUBNET_DB_NSG_NAME=ipm-vnet-db-subnet-nsg
ARO_SUBNET_DMZ_ADDRESS_PREFIX=10.11.5.0/25
ARO_SUBNET_DMZ_NAME=ipm-vnet-dmz-subnet
ARO_SUBNET_DMZ_NSG_NAME=ipm-vnet-dmz-subnet-nsg
ARO_SUBNET_MASTER_ADDRESS_PREFIX=10.11.0.0/23
ARO_SUBNET_MASTER_NAME=ipm-vnet-master-subnet
ARO_SUBNET_MASTER_NSG_NAME=ipm-vnet-master-subnet-nsg
ARO_SUBNET_TRUSTED_ADDRESS_PREFIX=10.11.5.128/25
ARO_SUBNET_TRUSTED_NAME=ipm-vnet-trusted-subnet
ARO_SUBNET_TRUSTED_NSG_NAME=ipm-vnet-trusted-subnet-nsg
ARO_SUBNET_VGW_ADDRESS_PREFIX=10.11.6.0/25
ARO_SUBNET_VGW_NAME=GatewaySubnet
ARO_SUBNET_VGW_NSG_NAME=GatewaySubnet-nsg
ARO_SUBNET_WORKER_ADDRESS_PREFIX=10.11.2.0/23
ARO_SUBNET_WORKER_NAME=ipm-vnet-worker-subnet
ARO_SUBNET_WORKER_NSG_NAME=ipm-vnet-worker-subnet-nsg
ARO_SUBSCRIPTION_ID=12c7070f-83e5-453b-96d0-90770d2cf942
ARO_SUBSCRIPTION_NAME=Azure subscription for mitaei
ARO_TENANT_ID=25fe96e7-85ec-4e6a-b93f-779b16ff751d
ARO_TENANT_NAME=mitaei.net
ARO_VGW_NAME=ipm-vpn
ARO_VGW_PKI_BITS=2048
ARO_VGW_PKI_CLIENT=example
ARO_VGW_PKI_CLIENT_CRT_FILE=/home/jtingiris/prj/mit/aei/pki/ipm-vpn-client-example.crt
ARO_VGW_PKI_CLIENT_EXT_FILE=/home/jtingiris/prj/mit/aei/pki/ipm-vpn-client-example.ext
ARO_VGW_PKI_CLIENT_KEY_FILE=/home/jtingiris/prj/mit/aei/pki/ipm-vpn-client-example.key
ARO_VGW_PKI_CLIENT_KEY_FILE_PASSPHRASE=!example!
ARO_VGW_PKI_CLIENT_NAME=ipm-vpn-client-example
ARO_VGW_PKI_CLIENT_PFX_FILE=/home/jtingiris/prj/mit/aei/pki/ipm-vpn-client-example.pfx
ARO_VGW_PKI_CLIENT_REQ_FILE=/home/jtingiris/prj/mit/aei/pki/ipm-vpn-client-example.req
ARO_VGW_PKI_CLIENT_SERIAL_FILE=/home/jtingiris/prj/mit/aei/pki/ipm-vpn-client-example.serial
ARO_VGW_PKI_DIR=/home/jtingiris/prj/mit/aei/pki
ARO_VGW_PKI_ROOT_CA_SERIAL_FILE=/home/jtingiris/prj/mit/aei/pki/ipm-vpn-root.serial
ARO_VGW_PKI_ROOT_CRT_FILE=/home/jtingiris/prj/mit/aei/pki/
ARO_VGW_PKI_ROOT_CRT_FILE_NAME=ipm-vpn-root.crt
ARO_VGW_PKI_ROOT_KEY_FILE=/home/jtingiris/prj/mit/aei/pki/
ARO_VGW_PKI_ROOT_KEY_FILE_NAME=ipm-vpn-root.key
ARO_VGW_PKI_ROOT_KEY_FILE_PASSPHRASE=Pk1P4ssphr4s3!!
ARO_VGW_POOL_ADDRESS_PREFIX=172.16.11.0/24
ARO_VGW_PUBLIC_ADDRESS_NAME=ipm-vpn-public-ip
ARO_VGW_REDUNDANCY=true
ARO_VGW_SKU=VpnGw1AZ
ARO_VGW_TYPE=RouteBased
ARO_VM_JUMP_ADMIN_NAME=ipm-vm-jumpbox-admin
ARO_VM_JUMP_IMAGE_MARKETPLACE=true
ARO_VM_JUMP_IMAGE_URN=cognosys:docker-ce-with-centos-8-0-free:docker-ce-with-centos-8-0-free:1.2019.0710
ARO_VM_JUMP_NAME=ipm-vm-jumpbox
ARO_VM_JUMP_PUBLIC_ADDRESS_NAME=ipm-vm-jumpbox-public-ip
ARO_VM_JUMP_SIZE=Standard_B1ms
ARO_VNET_ADDRESS_PREFIX=10.11.0.0/21
ARO_VNET_NAME=ipm-vnet
</code></pre>

<h3 id="5-setup-required-directories">5 - Setup Required Directories</h3>
<p>This documentation provides commands that create files.  To better organize the output files, the directories must exist or be created.</p>
<p><strong><em>Command(s):</em></strong></p>
<pre><code class="bash">env | egrep &quot;ARO.*DIR&quot;
</code></pre>

<p><strong><em>Example Output:</em></strong></p>
<pre><code>ARO_REDHAT_PULL_SECRET_DIR=/home/jtingiris/prj/mit/aei/secrets
ARO_VGW_PKI_DIR=/home/jtingiris/prj/mit/aei/pki
</code></pre>

<h4 id="51-create-required-directories">5.1 - Create Required Directories</h4>
<p><strong><em>Reference(s):</em></strong></p>
<ul>
<li><a href="https://man7.org/linux/man-pages/man1/mkdir.1.html">https://man7.org/linux/man-pages/man1/mkdir.1.html</a></li>
</ul>
<p><strong><em>Command(s):</em></strong></p>
<pre><code class="bash">mkdir -p &quot;${ARO_VGW_PKI_DIR}&quot;
mkdir -p &quot;${ARO_REDHAT_PULL_SECRET_DIR}&quot;
</code></pre>

<h4 id="52-verify-required-directories">5.2 - Verify Required Directories</h4>
<p><strong><em>Reference(s):</em></strong></p>
<ul>
<li><a href="https://man7.org/linux/man-pages/man1/ls.1.html">https://man7.org/linux/man-pages/man1/ls.1.html</a></li>
</ul>
<p><strong><em>Command(s):</em></strong></p>
<pre><code class="bash">ls -ld &quot;${ARO_VGW_PKI_DIR}&quot;
ls -ld &quot;${ARO_REDHAT_PULL_SECRET_DIR}&quot;
</code></pre>

<p><strong><em>Example Output:</em></strong></p>
<pre><code class="bash">drwxrws---+ 3 jtingiris mit 4096 Sep 21 10:06 /home/jtingiris/prj/mit/aei/pki
</code></pre>

<pre><code class="bash">drwxrws---+ 2 jtingiris mit 4096 Sep 17 16:11 /home/jtingiris/prj/mit/aei/secrets
</code></pre>

<h3 id="6-setup-azure-cli">6 - Setup Azure CLI</h3>
<p>The Azure CLI is a Command Line Interface (CLI) used to create and manage Azure resources.  The Azure CLI works with all Azure services.  It is designed to more quickly work with Azure, with an emphasis on automation.</p>
<p><strong><em>Reference(s):</em></strong></p>
<ul>
<li><a href="https://docs.microsoft.com/en-us/cli/azure/what-is-azure-cli?view=azure-cli-latest">https://docs.microsoft.com/en-us/cli/azure/what-is-azure-cli?view=azure-cli-latest</a></li>
</ul>
<p><strong><em>Command(s):</em></strong></p>
<pre><code class="bash">env | egrep &quot;ARO.*DIR&quot;
</code></pre>

<p><strong><em>Example Output:</em></strong></p>
<pre><code>ARO_REDHAT_PULL_SECRET_DIR=/home/jtingiris/prj/mit/aei/secrets
ARO_VGW_PKI_DIR=/home/jtingiris/prj/mit/aei/pki
</code></pre>

<h4 id="61-install-azure-cli">6.1 - Install Azure CLI</h4>
<p>The Azure CLI is available to install on Windows, macOS and Linux environments. It can also be run in a Docker container and Azure Cloud Shell.</p>
<p>To install the Azure CLI, please follow the link in the Reference(s) section of this topic.</p>
<p><strong><em>Reference(s):</em></strong></p>
<ul>
<li><a href="https://docs.microsoft.com/en-us/cli/azure/install-azure-cli?view=azure-cli-latest">https://docs.microsoft.com/en-us/cli/azure/install-azure-cli?view=azure-cli-latest</a></li>
</ul>
<p><strong><em>Command(s):</em></strong></p>
<pre><code class="bash">az --version
</code></pre>

<p><strong><em>Example Output:</em></strong></p>
<pre><code class="bash">azure-cli                         2.12.0

core                              2.12.0
telemetry                          1.0.6

Extensions:
resource-graph                     1.1.0
aro                                1.0.0

Python location '/usr/bin/python3'
Extensions directory '/home/jtingiris/.azure/cliextensions'

Python (Linux) 3.8.5 (default, Aug 12 2020, 00:00:00) 
[GCC 10.2.1 20200723 (Red Hat 10.2.1-1)]

Legal docs and information: aka.ms/AzureCliLegal


Your CLI is up-to-date.

Please let us know how we are doing: https://aka.ms/azureclihats
and let us know if you're interested in trying out our newest features: https://aka.ms/CLIUXstudy
</code></pre>

<h4 id="62-subscription-owner-login">6.2 - Subscription Owner Login</h4>
<p>The Azure Subscription Owner must perform the remaining steps in this documentation.</p>
<p><strong><em>Reference(s):</em></strong></p>
<ul>
<li><a href="https://docs.microsoft.com/en-us/cli/azure/authenticate-azure-cli?view=azure-cli-latest">https://docs.microsoft.com/en-us/cli/azure/authenticate-azure-cli?view=azure-cli-latest</a></li>
</ul>
<p><strong><em>Command(s):</em></strong></p>
<pre><code class="bash">az login
export AZ_USER=$(az account show --query 'user.name' --output tsv)
az role assignment list --role Owner --query &quot;[?principalName=='${AZ_USER}'].principalName&quot; --output tsv
</code></pre>

<p><strong><em>Example Output:</em></strong></p>
<pre><code class="bash">joseph.tingiris@mitaei.net
</code></pre>

<h4 id="63-verify-azure-tenant">6.3 - Verify Azure Tenant</h4>
<p>One way to verify the Azure Tenant is to obtain the Tenant ID with az.  Another way is to login to the Azure AAD portal.</p>
<p>The Tenant ID must match what is in the environment configuration file.</p>
<p><strong><em>Reference(s):</em></strong></p>
<ul>
<li><a href="https://docs.microsoft.com/en-us/cli/azure/account?view=azure-cli-latest#az_account_show">https://docs.microsoft.com/en-us/cli/azure/account?view=azure-cli-latest#az_account_show</a></li>
<li><a href="https://aad.portal.azure.com/">https://aad.portal.azure.com/</a></li>
</ul>
<p><strong><em>Command(s):</em></strong></p>
<pre><code class="bash">az account show --query '[{tenantId:tenantId}, {homeTenantId:homeTenantId}]'
export AZ_TENANT_ID=$(az account show --query 'tenantId' --output tsv 2&gt; /dev/null)
if [ &quot;${ARO_TENANT_ID}&quot; != &quot;${AZ_TENANT_ID}&quot; ];then; echo &quot;ERROR! ARO_TENANT_ID (${ARO_TENANT_ID}) does not match this tenant id (${AZ_TENANT_ID})&quot;; fi
</code></pre>

<p><strong><em>Example Output:</em></strong></p>
<pre><code class="json">[
  {
    &quot;tenantId&quot;: &quot;25fe96e7-85ec-4e6a-b93f-779b16ff751d&quot;
  },
  {
    &quot;homeTenantId&quot;: &quot;25fe96e7-85ec-4e6a-b93f-779b16ff751d&quot;
  }
]
</code></pre>

<h4 id="64-set-default-subscription">6.4 - Set Default Subscription</h4>
<p>Set the default subscription that the ARO resources will be installed in.</p>
<p><strong><em>Reference(s):</em></strong></p>
<ul>
<li><a href="https://docs.microsoft.com/en-us/cli/azure/account?view=azure-cli-latest#az_account_set">https://docs.microsoft.com/en-us/cli/azure/account?view=azure-cli-latest#az_account_set</a></li>
</ul>
<p><strong><em>Command(s):</em></strong></p>
<pre><code class="bash">az account set -s &quot;${ARO_SUBSCRIPTION_NAME}&quot;
</code></pre>

<p><strong><em>Example Output:</em></strong></p>
<pre><code class="diff">+ success does not produce any output
</code></pre>

<h4 id="65-verify-default-subscription">6.5 - Verify Default Subscription</h4>
<p>The Azure CLI Default Subscription will be used to provision all ARO resources.</p>
<p><strong><em>Reference(s):</em></strong></p>
<ul>
<li><a href="https://docs.microsoft.com/en-us/cli/azure/account?view=azure-cli-latest#az_account_list">https://docs.microsoft.com/en-us/cli/azure/account?view=azure-cli-latest#az_account_list</a></li>
</ul>
<p><strong><em>Command(s):</em></strong></p>
<pre><code class="bash">az account list --query '[?isDefault == `true`]'
</code></pre>

<p><strong><em>Example Output:</em></strong></p>
<pre><code class="json">[
  {
    &quot;cloudName&quot;: &quot;AzureCloud&quot;,
    &quot;homeTenantId&quot;: &quot;25fe96e7-85ec-4e6a-b93f-779b16ff751d&quot;,
    &quot;id&quot;: &quot;12c7070f-83e5-453b-96d0-90770d2cf942&quot;,
    &quot;isDefault&quot;: true,
    &quot;managedByTenants&quot;: [],
    &quot;name&quot;: &quot;Azure subscription for mitaei&quot;,
    &quot;state&quot;: &quot;Enabled&quot;,
    &quot;tenantId&quot;: &quot;25fe96e7-85ec-4e6a-b93f-779b16ff751d&quot;,
    &quot;user&quot;: {
      &quot;name&quot;: &quot;joseph.tingiris@mitaei.net&quot;,
      &quot;type&quot;: &quot;user&quot;
    }
  }
]
</code></pre>

<h3 id="7-setup-subscription-owners">7 - Setup Subscription Owners</h3>
<p>There should be at least two (2) Subscription Owners.  This step is optional, but recommended.  It will use the ${ARO_SUBSCRIPTION_OWNERS} environment value and ensure all User Principal Names (UPNs) are added as Subscription Owners.</p>
<p><strong><em>Reference(s):</em></strong></p>
<ul>
<li><a href="https://docs.microsoft.com/en-us/azure/role-based-access-control/built-in-roles#owner">https://docs.microsoft.com/en-us/azure/role-based-access-control/built-in-roles#owner</a></li>
</ul>
<h4 id="71-create-subscription-owners">7.1 - Create Subscription Owners</h4>
<p><strong><em>Reference(s):</em></strong></p>
<ul>
<li><a href="https://docs.microsoft.com/en-us/cli/azure/role/assignment?view=azure-cli-latest#az_role_assignment_create">https://docs.microsoft.com/en-us/cli/azure/role/assignment?view=azure-cli-latest#az_role_assignment_create</a></li>
</ul>
<p><strong><em>Command(s):</em></strong></p>
<pre><code class="bash">for ARO_SUBSCRIPTION_OWNER in ${ARO_SUBSCRIPTION_OWNERS[@]}; do az role assignment create --assignee ${ARO_SUBSCRIPTION_OWNER} --role Owner; done
</code></pre>

<p><strong><em>Example Output:</em></strong></p>
<pre><code>{
  &quot;canDelegate&quot;: null,
  &quot;condition&quot;: null,
  &quot;conditionVersion&quot;: null,
  &quot;description&quot;: null,
  &quot;id&quot;: &quot;/subscriptions/12c7070f-83e5-453b-96d0-90770d2cf942/providers/Microsoft.Authorization/roleAssignments/c3649109-4f94-47cf-9c05-2677f6f1a9a8&quot;,
  &quot;name&quot;: &quot;c3649109-4f94-47cf-9c05-2677f6f1a9a8&quot;,
  &quot;principalId&quot;: &quot;52f7dd5d-ad08-4b40-878f-40686c51c24e&quot;,
  &quot;principalName&quot;: &quot;christy.walsh@mitaei.net&quot;,
  &quot;principalType&quot;: &quot;User&quot;,
  &quot;roleDefinitionId&quot;: &quot;/subscriptions/12c7070f-83e5-453b-96d0-90770d2cf942/providers/Microsoft.Authorization/roleDefinitions/8e3af657-a8ff-443c-a75c-2fe8c4bcb635&quot;,
  &quot;roleDefinitionName&quot;: &quot;Owner&quot;,
  &quot;scope&quot;: &quot;/subscriptions/12c7070f-83e5-453b-96d0-90770d2cf942&quot;,
  &quot;type&quot;: &quot;Microsoft.Authorization/roleAssignments&quot;
}
</code></pre>

<pre><code>{
  &quot;canDelegate&quot;: null,
  &quot;condition&quot;: null,
  &quot;conditionVersion&quot;: null,
  &quot;description&quot;: null,
  &quot;id&quot;: &quot;/subscriptions/12c7070f-83e5-453b-96d0-90770d2cf942/providers/Microsoft.Authorization/roleAssignments/0e3fa58c-ed20-4ead-bc53-47578faf7b8e&quot;,
  &quot;name&quot;: &quot;0e3fa58c-ed20-4ead-bc53-47578faf7b8e&quot;,
  &quot;principalId&quot;: &quot;83525d38-8d7f-4476-81aa-14c46c4cb876&quot;,
  &quot;principalName&quot;: &quot;joseph.tingiris@mitaei.net&quot;,
  &quot;principalType&quot;: &quot;User&quot;,
  &quot;roleDefinitionId&quot;: &quot;/subscriptions/12c7070f-83e5-453b-96d0-90770d2cf942/providers/Microsoft.Authorization/roleDefinitions/8e3af657-a8ff-443c-a75c-2fe8c4bcb635&quot;,
  &quot;roleDefinitionName&quot;: &quot;Owner&quot;,
  &quot;scope&quot;: &quot;/subscriptions/12c7070f-83e5-453b-96d0-90770d2cf942&quot;,
  &quot;type&quot;: &quot;Microsoft.Authorization/roleAssignments&quot;
}
</code></pre>

<h4 id="72-verify-subscription-owners">7.2 - Verify Subscription Owners</h4>
<p><strong><em>Reference(s):</em></strong></p>
<ul>
<li><a href="https://docs.microsoft.com/en-us/cli/azure/role/assignment?view=azure-cli-latest#az_role_assignment_list">https://docs.microsoft.com/en-us/cli/azure/role/assignment?view=azure-cli-latest#az_role_assignment_list</a></li>
</ul>
<p><strong><em>Command(s):</em></strong></p>
<pre><code class="bash">az role assignment list --role Owner --output table
</code></pre>

<p><strong><em>Example Output:</em></strong></p>
<pre><code class="bash">Principal                   Role    Scope
--------------------------  ------  ---------------------------------------------------
christy.walsh@mitaei.net    Owner   /subscriptions/12c7070f-83e5-453b-96d0-90770d2cf942
joseph.tingiris@mitaei.net  Owner   /subscriptions/12c7070f-83e5-453b-96d0-90770d2cf942
</code></pre>

<h3 id="8-verify-azure-subscription">8 - Verify Azure Subscription</h3>
<p>Uze <code>az</code> to verify Azure Subscription details.  The subscription may also be manually verified via the Azure Portal Subscription blade.</p>
<p><strong><em>Reference(s):</em></strong></p>
<ul>
<li><a href="https://docs.microsoft.com/en-us/cli/azure/account?view=azure-cli-latest">https://docs.microsoft.com/en-us/cli/azure/account?view=azure-cli-latest</a></li>
</ul>
<p><strong><em>Command(s):</em></strong></p>
<pre><code class="bash">env | egrep -e '^ARO_SUBSCRIPTION_NAME|^ARO_SUBSCRIPTION_ID|^ARO_TENANT_ID|^ARO_LOCATION_NAME'
echo &quot;ARO_SUBSCRIPTION_OWNERS=${ARO_SUBSCRIPTION_OWNERS[@]}&quot;
echo &quot;ARO_VERIFY_QUOTA_NAMES=${ARO_VERIFY_QUOTA_NAMES[@]}&quot;
</code></pre>

<p><strong><em>Example Output:</em></strong></p>
<pre><code>ARO_LOCATION_NAME=eastus
ARO_TENANT_ID=25fe96e7-85ec-4e6a-b93f-779b16ff751d
ARO_SUBSCRIPTION_ID=12c7070f-83e5-453b-96d0-90770d2cf942
ARO_SUBSCRIPTION_NAME=Azure subscription for mitaei
ARO_SUBSCRIPTION_OWNERS=christy.walsh@mitaei.net joseph.tingiris@mitaei.net
ARO_VERIFY_QUOTA_NAMES=Standard DSv3 Family vCPUs Standard Dv2 Family vCPUs
</code></pre>

<h4 id="81-verify-subscription-name">8.1 - Verify Subscription Name</h4>
<p>Verify the following configuration variables are valid:</p>
<ul>
<li>${ARO_SUBSCRIPTION_NAME}</li>
</ul>
<p><strong><em>Reference(s):</em></strong></p>
<ul>
<li><a href="https://docs.microsoft.com/en-us/cli/azure/account?view=azure-cli-latest#az-account-list">https://docs.microsoft.com/en-us/cli/azure/account?view=azure-cli-latest#az-account-list</a></li>
<li><a href="https://docs.microsoft.com/en-us/cli/azure/account?view=azure-cli-latest#az-account-show">https://docs.microsoft.com/en-us/cli/azure/account?view=azure-cli-latest#az-account-show</a></li>
<li><a href="https://portal.azure.com/#blade/Microsoft_Azure_Billing/SubscriptionsBlade">https://portal.azure.com/#blade/Microsoft_Azure_Billing/SubscriptionsBlade</a></li>
</ul>
<p><strong><em>Command(s):</em></strong></p>
<pre><code class="bash">az account list --output table
az account show --subscription &quot;${ARO_SUBSCRIPTION_ID}&quot; --query &quot;[{subscription_name:name},{subscription_id:id}]&quot;
export AZ_SUBSCRIPTION_NAME=$(az account show --query 'name' --output tsv)
if [ &quot;${AZ_SUBSCRIPTION_NAME}&quot; != &quot;${ARO_SUBSCRIPTION_NAME}&quot; ]; then echo &quot;ERROR! az subscription name \&quot;${AZ_SUBSCRIPTION_NAME}\&quot; does not match aro subscription name \&quot;${ARO_SUBSCRIPTION_NAME}\&quot;&quot;; fi
</code></pre>

<p><strong><em>Example Output:</em></strong></p>
<pre><code>Name                           CloudName    SubscriptionId                        State    IsDefault
-----------------------------  -----------  ------------------------------------  -------  -----------
N/A(tenant level account)      AzureCloud   fe47e621-b8dd-44c8-ba00-c07e41e4b3d1  Enabled  False
N/A(tenant level account)      AzureCloud   300a380f-b8d0-46c1-be0e-3b8e1af971b6  Enabled  False
AP_BASE                        AzureCloud   54f592d8-63d3-48f3-9f92-a15651f96255  Enabled  False
Azure subscription for mitaei  AzureCloud   12c7070f-83e5-453b-96d0-90770d2cf942  Enabled  True
</code></pre>

<pre><code>[
  {
    &quot;subscription_name&quot;: &quot;Azure subscription for mitaei&quot;
  },
  {
    &quot;subscription_id&quot;: &quot;12c7070f-83e5-453b-96d0-90770d2cf942&quot;
  }
]
</code></pre>

<h4 id="82-verify-subscription-id">8.2 - Verify Subscription ID</h4>
<p>Verify the following configuration variables are valid:</p>
<ul>
<li>${ARO_SUBSCRIPTION_ID}</li>
</ul>
<p><strong><em>Reference(s):</em></strong></p>
<ul>
<li><a href="https://docs.microsoft.com/en-us/cli/azure/account?view=azure-cli-latest#az-account-list">https://docs.microsoft.com/en-us/cli/azure/account?view=azure-cli-latest#az-account-list</a></li>
<li><a href="https://docs.microsoft.com/en-us/cli/azure/account?view=azure-cli-latest#az-account-show">https://docs.microsoft.com/en-us/cli/azure/account?view=azure-cli-latest#az-account-show</a></li>
</ul>
<p><strong><em>Command(s):</em></strong></p>
<pre><code class="bash">az account show --subscription &quot;${ARO_SUBSCRIPTION_ID}&quot; --query &quot;[{subscription_name:name},{subscription_id:id}]&quot;
export AZ_SUBSCRIPTION_ID=$(az account show --query 'id' --output tsv 2&gt; /dev/null)
if [ &quot;${AZ_SUBSCRIPTION_ID}&quot; != &quot;${ARO_SUBSCRIPTION_ID}&quot; ]; then echo &quot;ERROR! az subscription name \&quot;${AZ_SUBSCRIPTION_ID}\&quot; does not match aro subscription name \&quot;${ARO_SUBSCRIPTION_ID}\&quot;&quot;; fi
</code></pre>

<p><strong><em>Example Output:</em></strong></p>
<pre><code>[
  {
    &quot;subscription_name&quot;: &quot;Azure subscription for mitaei&quot;
  },
  {
    &quot;subscription_id&quot;: &quot;12c7070f-83e5-453b-96d0-90770d2cf942&quot;
  }
]
</code></pre>

<h4 id="83-verify-subscription-location">8.3 - Verify Subscription Location</h4>
<p>Verify the following configuration variables are valid:</p>
<ul>
<li>${ARO_LOCATION_NAME}</li>
</ul>
<p><em>NOTE: Azure Red Hat OpenShift is only available in certain Microsoft geographies, or locations.  Please use the links in the references of this section to determine the most suitable location for the installation.  The location name will be used throughout this document.</em></p>
<p><strong><em>Reference(s):</em></strong></p>
<ul>
<li><a href="https://azure.microsoft.com/en-us/global-infrastructure/services/?products=openshift">https://azure.microsoft.com/en-us/global-infrastructure/services/?products=openshift</a></li>
</ul>
<p><strong><em>Command(s):</em></strong></p>
<pre><code class="bash">az account list-locations --query &quot;[?name=='${ARO_LOCATION_NAME}']&quot; --output table
export AZ_LOCATION_NAME=$(az account list-locations --query &quot;[?name=='${ARO_LOCATION_NAME}'].name&quot; --output tsv)
if [ &quot;${AZ_LOCATION_NAME}&quot; != &quot;${ARO_LOCATION_NAME}&quot; ]; then echo &quot;ERROR! az location name \&quot;${AZ_LOCATION_NAME}\&quot; does not match aro location name \&quot;${ARO_LOCATION_NAME}\&quot;&quot;; fi
</code></pre>

<p><strong><em>Example Output:</em></strong></p>
<pre><code>Name    DisplayName    RegionalDisplayName
------  -------------  ---------------------
eastus  East US        (US) East US
</code></pre>

<h4 id="84-verify-subscription-limits">8.4 - Verify Subscription Limits</h4>
<p>Verify the following configuration variable is not empty:</p>
<ul>
<li>${ARO_VERIFY_QUOTA_NAMES}</li>
</ul>
<p>An ARO cluster uses several Microsoft Azure components.  It requires a minimum of 40 Total Regional vCPUs and 36 Standard DSv3 Family vCPUs.</p>
<p><strong><em>The Azure subscription and service limits, quotas, and constraints may be insufficient to install ARO.</em></strong></p>
<p>Default limits vary by offer category types, such as Free Trial and Pay-As-You-Go, and by series, such as Dv2, F, and G. For example, the default for Enterprise Agreement subscriptions is 350 cores.</p>
<p>It is wise to check the limits for the subscription type and if necessary, increase quota limits before the installation of an Azure OpenShift cluster.</p>
<p>ARO minimum limits are required for:</p>
<ul>
<li>Standard DSv3 Family vCPUs</li>
<li>Standard Dv2 Family vCPUs</li>
</ul>
<p><strong><em>Reference(s):</em></strong></p>
<ul>
<li><a href="https://docs.microsoft.com/en-us/azure/azure-subscription-service-limits">https://docs.microsoft.com/en-us/azure/azure-subscription-service-limits</a></li>
<li><a href="https://docs.microsoft.com/en-us/azure/azure-resource-manager/management/resource-name-rules">https://docs.microsoft.com/en-us/azure/azure-resource-manager/management/resource-name-rules</a></li>
<li><a href="https://docs.microsoft.com/en-us/azure/networking/check-usage-against-limits">https://docs.microsoft.com/en-us/azure/networking/check-usage-against-limits</a></li>
<li><a href="https://docs.microsoft.com/en-us/cli/azure/vm?view=azure-cli-latest#az-vm-list-usage">https://docs.microsoft.com/en-us/cli/azure/vm?view=azure-cli-latest#az-vm-list-usage</a></li>
<li><a href="https://docs.openshift.com/container-platform/4.5/installing/installing_azure/installing-azure-account.html">https://docs.openshift.com/container-platform/4.5/installing/installing_azure/installing-azure-account.html</a></li>
</ul>
<p><strong><em>Command(s):</em></strong></p>
<pre><code class="bash">if [ &quot;${ARO_VERIFY_QUOTA_NAMES}&quot; == &quot;&quot; ]; then echo &quot;WARNING! ARO_VERIFY_QUOTA_NAMES is not set&quot;; fi
</code></pre>

<p><strong><em>Example Output:</em></strong></p>
<pre><code class="diff">+ success does not produce any output
</code></pre>

<h4 id="85-verify-subscription-quotas">8.5 - Verify Subscription Quotas</h4>
<p><strong><em>This step must be done manually.</em></strong></p>
<p>Requesting a quota increase can take 24-48 hours to complete.  The Subscription Owner must do this step.</p>
<p>Ensure the quota increase requests a minimum of 50 for the following VM families, 100 is preferred.</p>
<p>Dv2 Series
DSv3 Series</p>
<p>To increase the quota limits, a support case must be opened. Microsoft will communicate directly to the person who requested the increase.  An increase in the VM series quotas automatically increases the total regional vCPU limit by the same amount.</p>
<p><em>Links to Microsoft's directions on how to request a quota increase for a specific subscription are provided in the references section of this topic.</em></p>
<p>Verify subscription quotas for:</p>
<ul>
<li>Standard DSv3 Family vCPUs</li>
<li>Standard Dv2 Family vCPUs</li>
</ul>
<p><strong><em>Reference(s):</em></strong></p>
<ul>
<li><a href="https://docs.microsoft.com/en-us/azure/azure-portal/supportability/per-vm-quota-requests">https://docs.microsoft.com/en-us/azure/azure-portal/supportability/per-vm-quota-requests</a></li>
<li><a href="https://docs.microsoft.com/en-us/azure/azure-portal/supportability/regional-quota-requests">https://docs.microsoft.com/en-us/azure/azure-portal/supportability/regional-quota-requests</a></li>
</ul>
<h4 id="86-standard-dsv3-family-vcpus">8.6 - Standard DSv3 Family vCPUs</h4>
<p>Ensure the quota "limit" is greater than 50.</p>
<p><strong><em>Command(s):</em></strong></p>
<pre><code class="bash">az vm list-usage --location ${ARO_LOCATION_NAME} --query &quot;[?localName=='Standard DSv3 Family vCPUs']&quot;
export AZ_VERIFY_QUOTA_LIMIT=$(az vm list-usage --location ${ARO_LOCATION_NAME} --query &quot;[?localName=='Standard DSv3 Family vCPUs'].limit&quot; --output tsv)
if [ &quot;${AZ_VERIFY_QUOTA_LIMIT}&quot; == &quot;&quot; ] || [ ${AZ_VERIFY_QUOTA_LIMIT} -lt 50  ]; then echo &quot;ERROR! Quota limit for &quot;Standard DSv3 Family vCPUs&quot; is too low!  Open a support case with Microsoft.&quot;; fi
</code></pre>

<p><strong><em>Example Output:</em></strong></p>
<pre><code>[
  {
    &quot;currentValue&quot;: &quot;0&quot;,
    &quot;limit&quot;: &quot;100&quot;,
    &quot;localName&quot;: &quot;Standard DSv3 Family vCPUs&quot;,
    &quot;name&quot;: {
      &quot;localizedValue&quot;: &quot;Standard DSv3 Family vCPUs&quot;,
      &quot;value&quot;: &quot;standardDSv3Family&quot;
    }
  }
]
</code></pre>

<h4 id="87-standard-dv2-family-vcpus">8.7 - Standard Dv2 Family vCPUs</h4>
<p>Ensure the quota "limit" is greater than 50.</p>
<p><strong><em>Command(s):</em></strong></p>
<pre><code class="bash">az vm list-usage --location ${ARO_LOCATION_NAME} --query &quot;[?localName=='Standard Dv2 Family vCPUs']&quot;
export AZ_VERIFY_QUOTA_LIMIT=$(az vm list-usage --location ${ARO_LOCATION_NAME} --query &quot;[?localName=='Standard Dv2 Family vCPUs'].limit&quot; --output tsv)
if [ &quot;${AZ_VERIFY_QUOTA_LIMIT}&quot; == &quot;&quot; ] || [ ${AZ_VERIFY_QUOTA_LIMIT} -lt 50  ]; then echo &quot;ERROR! Quota limit for &quot;Standard Dv2 Family vCPUs&quot; is too low!  Open a support case with Microsoft.&quot;; fi
</code></pre>

<p><strong><em>Example Output:</em></strong></p>
<pre><code>[
  {
    &quot;currentValue&quot;: &quot;0&quot;,
    &quot;limit&quot;: &quot;100&quot;,
    &quot;localName&quot;: &quot;Standard Dv2 Family vCPUs&quot;,
    &quot;name&quot;: {
      &quot;localizedValue&quot;: &quot;Standard Dv2 Family vCPUs&quot;,
      &quot;value&quot;: &quot;standardDv2Family&quot;
    }
  }
]
</code></pre>

<h3 id="9-setup-openshift-administrators">9 - Setup OpenShift Administrators</h3>
<p>Identify the people who will be responsible for administering the OpenShift cluster.  These individuals will need Microsoft accounts and elevated roles and responsibilities.</p>
<p>The details for how to use <code>az</code> to create users, groups, and add the necessary subscription roles is described below.</p>
<p><strong><em>Command(s):</em></strong></p>
<pre><code class="bash">env | egrep -e '^ARO_DOMAIN_NAME'
echo &quot;ARO_ADMINISTRATORS=${ARO_ADMINISTRATORS[@]}&quot;
</code></pre>

<p><strong><em>Example Output:</em></strong></p>
<pre><code>ARO_DOMAIN_NAME=mitaei.net
ARO_ADMINISTRATORS=openshift-admin@mitaei.net arun.babu@mitaei.net joseph.tingiris@mitaei.net sivaprasad.k@mitaei.net
</code></pre>

<h4 id="91-create-administrator-accounts">9.1 - Create Administrator Accounts</h4>
<p>This is a good time for the Global Administrator to create Microsoft accounts for the OpenShift Administrators.</p>
<p>Ideally, the OpenShift Administrators would also have the Global Administrator role for the tenant.  However, this is not always possible.  If you are the Global Administrator then please take note that the <strong><em>OpenShift Administrators must have Microsoft accounts in the tenant</em></strong>, and their Microsoft accounts must have at least the Contributor and User Access Administrator roles for the Azure Subscription in which ARO is to be deployed.</p>
<p>Creating users may be done with <code>az</code>, via the AAD portal, or [https://admin.microsoft.com].</p>
<p><em>NOTE: The openshift-admin user created is an <strong>example</strong> and should <strong><em>not</em></strong> be used.  We strongly recommend using real names and individual accounts, not ficticous names or group accounts.</em></p>
<p><strong><em>Command(s):</em></strong></p>
<pre><code class="bash">az ad user create --display-name openshift-admin@mitaei.net --user-principal-name openshift-admin@mitaei.net --password &quot;DIl3*lks)-${ARO}-r4d0m!&quot; --force-change-password-next-login
</code></pre>

<p><strong><em>Example Output:</em></strong></p>
<pre><code class="json">{
  &quot;accountEnabled&quot;: true,
  &quot;ageGroup&quot;: null,
  &quot;assignedLicenses&quot;: [],
  &quot;assignedPlans&quot;: [],
  &quot;city&quot;: null,
  &quot;companyName&quot;: null,
  &quot;consentProvidedForMinor&quot;: null,
  &quot;country&quot;: null,
  &quot;createdDateTime&quot;: null,
  &quot;creationType&quot;: null,
  &quot;deletionTimestamp&quot;: null,
  &quot;department&quot;: null,
  &quot;dirSyncEnabled&quot;: null,
  &quot;displayName&quot;: &quot;openshift-admin@mitaei.net&quot;,
  &quot;employeeId&quot;: null,
  &quot;facsimileTelephoneNumber&quot;: null,
  &quot;givenName&quot;: null,
  &quot;immutableId&quot;: null,
  &quot;isCompromised&quot;: null,
  &quot;jobTitle&quot;: null,
  &quot;lastDirSyncTime&quot;: null,
  &quot;legalAgeGroupClassification&quot;: null,
  &quot;mail&quot;: null,
  &quot;mailNickname&quot;: &quot;openshift-admin&quot;,
  &quot;mobile&quot;: null,
  &quot;objectId&quot;: &quot;8f9fc0bc-e694-435f-b0f8-1eb4c66caabb&quot;,
  &quot;objectType&quot;: &quot;User&quot;,
  &quot;odata.metadata&quot;: &quot;https://graph.windows.net/25fe96e7-85ec-4e6a-b93f-779b16ff751d/$metadata#directoryObjects/@Element&quot;,
  &quot;odata.type&quot;: &quot;Microsoft.DirectoryServices.User&quot;,
  &quot;onPremisesDistinguishedName&quot;: null,
  &quot;onPremisesSecurityIdentifier&quot;: null,
  &quot;otherMails&quot;: [],
  &quot;passwordPolicies&quot;: null,
  &quot;passwordProfile&quot;: {
    &quot;enforceChangePasswordPolicy&quot;: false,
    &quot;forceChangePasswordNextLogin&quot;: true,
    &quot;password&quot;: null
  },
  &quot;physicalDeliveryOfficeName&quot;: null,
  &quot;postalCode&quot;: null,
  &quot;preferredLanguage&quot;: null,
  &quot;provisionedPlans&quot;: [],
  &quot;provisioningErrors&quot;: [],
  &quot;proxyAddresses&quot;: [],
  &quot;refreshTokensValidFromDateTime&quot;: &quot;2020-09-23T14:09:26.228763Z&quot;,
  &quot;showInAddressList&quot;: null,
  &quot;signInNames&quot;: [],
  &quot;sipProxyAddress&quot;: null,
  &quot;state&quot;: null,
  &quot;streetAddress&quot;: null,
  &quot;surname&quot;: null,
  &quot;telephoneNumber&quot;: null,
  &quot;thumbnailPhoto@odata.mediaEditLink&quot;: &quot;directoryObjects/8f9fc0bc-e694-435f-b0f8-1eb4c66caabb/Microsoft.DirectoryServices.User/thumbnailPhoto&quot;,
  &quot;usageLocation&quot;: null,
  &quot;userIdentities&quot;: [],
  &quot;userPrincipalName&quot;: &quot;openshift-admin@mitaei.net&quot;,
  &quot;userState&quot;: null,
  &quot;userStateChangedOn&quot;: null,
  &quot;userType&quot;: &quot;Member&quot;
}
</code></pre>

<h4 id="92-verify-administrator-accounts">9.2 - Verify Administrator Accounts</h4>
<p>Verify the OpenShift Administrator accounts listed in ${ARO_ADMINISTRATORS} exist.</p>
<p><strong><em>Command(s):</em></strong></p>
<pre><code class="bash">for ARO_ADMINISTRATOR in ${ARO_ADMINISTRATORS[@]}; do az ad user show --id ${ARO_ADMINISTRATOR} --query '[{userPrincipalName:userPrincipalName}, {principalId:objectId}]'; if [ $? -ne 0 ]; then echo &quot;WARNING! ${ADMINISTRATOR} aad account was not found&quot;; fi; done
</code></pre>

<p><strong><em>Example Output:</em></strong></p>
<pre><code>[
  {
    &quot;userPrincipalName&quot;: &quot;openshift-admin@mitaei.net&quot;
  },
  {
    &quot;principalId&quot;: &quot;8f9fc0bc-e694-435f-b0f8-1eb4c66caabb&quot;
  }
]
[
  {
    &quot;userPrincipalName&quot;: &quot;arun.babu@mitaei.net&quot;
  },
  {
    &quot;principalId&quot;: &quot;4c3b0f6a-3e08-4d7e-9161-2a540bea4dc8&quot;
  }
]
[
  {
    &quot;userPrincipalName&quot;: &quot;joseph.tingiris@mitaei.net&quot;
  },
  {
    &quot;principalId&quot;: &quot;83525d38-8d7f-4476-81aa-14c46c4cb876&quot;
  }
]
[
  {
    &quot;userPrincipalName&quot;: &quot;sivaprasad.k@mitaei.net&quot;
  },
  {
    &quot;principalId&quot;: &quot;26d953e1-003f-4f61-9e68-4f3a5216d8e9&quot;
  }
]
</code></pre>

<h4 id="93-create-administrator-roles">9.3 - Create Administrator Roles</h4>
<p>The <em>Contributor</em> and <em>User Access Administrator</em> subscription roles are required to administer ARO.</p>
<p><strong><em>Command(s):</em></strong></p>
<pre><code class="bash">for ARO_ADMINISTRATOR in ${ARO_ADMINISTRATORS[@]}; do az role assignment create --assignee ${ARO_ADMINISTRATOR} --role &quot;Contributor&quot;; if [ $? -ne 0 ]; then echo &quot;ERROR! could not assign Contributor role to ${ARO_ADMINISTRATOR}&quot;; fi; done
for ARO_ADMINISTRATOR in ${ARO_ADMINISTRATORS[@]}; do az role assignment create --assignee ${ARO_ADMINISTRATOR} --role &quot;User Access Administrator&quot;; if [ $? -ne 0 ]; then echo &quot;ERROR! could not assign User Access Administrator role to ${ARO_ADMINISTRATOR}&quot;; fi; done
</code></pre>

<p><strong><em>Example Output:</em></strong></p>
<pre><code>{
  &quot;canDelegate&quot;: null,
  &quot;condition&quot;: null,
  &quot;conditionVersion&quot;: null,
  &quot;description&quot;: null,
  &quot;id&quot;: &quot;/subscriptions/12c7070f-83e5-453b-96d0-90770d2cf942/providers/Microsoft.Authorization/roleAssignments/af5625a2-869f-4b1f-af1e-c7dc3bd9fd29&quot;,
  &quot;name&quot;: &quot;af5625a2-869f-4b1f-af1e-c7dc3bd9fd29&quot;,
  &quot;principalId&quot;: &quot;8f9fc0bc-e694-435f-b0f8-1eb4c66caabb&quot;,
  &quot;principalType&quot;: &quot;User&quot;,
  &quot;roleDefinitionId&quot;: &quot;/subscriptions/12c7070f-83e5-453b-96d0-90770d2cf942/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c&quot;,
  &quot;scope&quot;: &quot;/subscriptions/12c7070f-83e5-453b-96d0-90770d2cf942&quot;,
  &quot;type&quot;: &quot;Microsoft.Authorization/roleAssignments&quot;
}

{
  &quot;canDelegate&quot;: null,
  &quot;condition&quot;: null,
  &quot;conditionVersion&quot;: null,
  &quot;description&quot;: null,
  &quot;id&quot;: &quot;/subscriptions/12c7070f-83e5-453b-96d0-90770d2cf942/providers/Microsoft.Authorization/roleAssignments/c1488473-33f8-488e-8db5-2f39e2c8d74f&quot;,
  &quot;name&quot;: &quot;c1488473-33f8-488e-8db5-2f39e2c8d74f&quot;,
  &quot;principalId&quot;: &quot;8f9fc0bc-e694-435f-b0f8-1eb4c66caabb&quot;,
  &quot;principalType&quot;: &quot;User&quot;,
  &quot;roleDefinitionId&quot;: &quot;/subscriptions/12c7070f-83e5-453b-96d0-90770d2cf942/providers/Microsoft.Authorization/roleDefinitions/18d7d88d-d35e-4fb5-a5c3-7773c20a72d9&quot;,
  &quot;scope&quot;: &quot;/subscriptions/12c7070f-83e5-453b-96d0-90770d2cf942&quot;,
  &quot;type&quot;: &quot;Microsoft.Authorization/roleAssignments&quot;
}

{
  &quot;canDelegate&quot;: null,
  &quot;condition&quot;: null,
  &quot;conditionVersion&quot;: null,
  &quot;description&quot;: null,
  &quot;id&quot;: &quot;/subscriptions/12c7070f-83e5-453b-96d0-90770d2cf942/providers/Microsoft.Authorization/roleAssignments/8f458612-ca5f-4ff2-832a-d00e700975b0&quot;,
  &quot;name&quot;: &quot;8f458612-ca5f-4ff2-832a-d00e700975b0&quot;,
  &quot;principalId&quot;: &quot;4c3b0f6a-3e08-4d7e-9161-2a540bea4dc8&quot;,
  &quot;principalName&quot;: &quot;arun.babu@mitaei.net&quot;,
  &quot;principalType&quot;: &quot;User&quot;,
  &quot;roleDefinitionId&quot;: &quot;/subscriptions/12c7070f-83e5-453b-96d0-90770d2cf942/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c&quot;,
  &quot;roleDefinitionName&quot;: &quot;Contributor&quot;,
  &quot;scope&quot;: &quot;/subscriptions/12c7070f-83e5-453b-96d0-90770d2cf942&quot;,
  &quot;type&quot;: &quot;Microsoft.Authorization/roleAssignments&quot;
}

{
  &quot;canDelegate&quot;: null,
  &quot;condition&quot;: null,
  &quot;conditionVersion&quot;: null,
  &quot;description&quot;: null,
  &quot;id&quot;: &quot;/subscriptions/12c7070f-83e5-453b-96d0-90770d2cf942/providers/Microsoft.Authorization/roleAssignments/7f1ba7da-c858-489f-a988-39123faa181f&quot;,
  &quot;name&quot;: &quot;7f1ba7da-c858-489f-a988-39123faa181f&quot;,
  &quot;principalId&quot;: &quot;4c3b0f6a-3e08-4d7e-9161-2a540bea4dc8&quot;,
  &quot;principalName&quot;: &quot;arun.babu@mitaei.net&quot;,
  &quot;principalType&quot;: &quot;User&quot;,
  &quot;roleDefinitionId&quot;: &quot;/subscriptions/12c7070f-83e5-453b-96d0-90770d2cf942/providers/Microsoft.Authorization/roleDefinitions/18d7d88d-d35e-4fb5-a5c3-7773c20a72d9&quot;,
  &quot;roleDefinitionName&quot;: &quot;User Access Administrator&quot;,
  &quot;scope&quot;: &quot;/subscriptions/12c7070f-83e5-453b-96d0-90770d2cf942&quot;,
  &quot;type&quot;: &quot;Microsoft.Authorization/roleAssignments&quot;
}

{
  &quot;canDelegate&quot;: null,
  &quot;condition&quot;: null,
  &quot;conditionVersion&quot;: null,
  &quot;description&quot;: null,
  &quot;id&quot;: &quot;/subscriptions/12c7070f-83e5-453b-96d0-90770d2cf942/providers/Microsoft.Authorization/roleAssignments/6f98e077-c161-453d-a903-b00acb9bd5f2&quot;,
  &quot;name&quot;: &quot;6f98e077-c161-453d-a903-b00acb9bd5f2&quot;,
  &quot;principalId&quot;: &quot;83525d38-8d7f-4476-81aa-14c46c4cb876&quot;,
  &quot;principalName&quot;: &quot;joseph.tingiris@mitaei.net&quot;,
  &quot;principalType&quot;: &quot;User&quot;,
  &quot;roleDefinitionId&quot;: &quot;/subscriptions/12c7070f-83e5-453b-96d0-90770d2cf942/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c&quot;,
  &quot;roleDefinitionName&quot;: &quot;Contributor&quot;,
  &quot;scope&quot;: &quot;/subscriptions/12c7070f-83e5-453b-96d0-90770d2cf942&quot;,
  &quot;type&quot;: &quot;Microsoft.Authorization/roleAssignments&quot;
}

{
  &quot;canDelegate&quot;: null,
  &quot;condition&quot;: null,
  &quot;conditionVersion&quot;: null,
  &quot;description&quot;: null,
  &quot;id&quot;: &quot;/subscriptions/12c7070f-83e5-453b-96d0-90770d2cf942/providers/Microsoft.Authorization/roleAssignments/91ea94dc-f9aa-486b-8c92-7c1911bced00&quot;,
  &quot;name&quot;: &quot;91ea94dc-f9aa-486b-8c92-7c1911bced00&quot;,
  &quot;principalId&quot;: &quot;83525d38-8d7f-4476-81aa-14c46c4cb876&quot;,
  &quot;principalName&quot;: &quot;joseph.tingiris@mitaei.net&quot;,
  &quot;principalType&quot;: &quot;User&quot;,
  &quot;roleDefinitionId&quot;: &quot;/subscriptions/12c7070f-83e5-453b-96d0-90770d2cf942/providers/Microsoft.Authorization/roleDefinitions/18d7d88d-d35e-4fb5-a5c3-7773c20a72d9&quot;,
  &quot;roleDefinitionName&quot;: &quot;User Access Administrator&quot;,
  &quot;scope&quot;: &quot;/subscriptions/12c7070f-83e5-453b-96d0-90770d2cf942&quot;,
  &quot;type&quot;: &quot;Microsoft.Authorization/roleAssignments&quot;
}

{
  &quot;canDelegate&quot;: null,
  &quot;condition&quot;: null,
  &quot;conditionVersion&quot;: null,
  &quot;description&quot;: null,
  &quot;id&quot;: &quot;/subscriptions/12c7070f-83e5-453b-96d0-90770d2cf942/providers/Microsoft.Authorization/roleAssignments/1bf7b433-935b-4160-a634-43bd291739c8&quot;,
  &quot;name&quot;: &quot;1bf7b433-935b-4160-a634-43bd291739c8&quot;,
  &quot;principalId&quot;: &quot;26d953e1-003f-4f61-9e68-4f3a5216d8e9&quot;,
  &quot;principalName&quot;: &quot;sivaprasad.k@mitaei.net&quot;,
  &quot;principalType&quot;: &quot;User&quot;,
  &quot;roleDefinitionId&quot;: &quot;/subscriptions/12c7070f-83e5-453b-96d0-90770d2cf942/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c&quot;,
  &quot;roleDefinitionName&quot;: &quot;Contributor&quot;,
  &quot;scope&quot;: &quot;/subscriptions/12c7070f-83e5-453b-96d0-90770d2cf942&quot;,
  &quot;type&quot;: &quot;Microsoft.Authorization/roleAssignments&quot;
}

{
  &quot;canDelegate&quot;: null,
  &quot;condition&quot;: null,
  &quot;conditionVersion&quot;: null,
  &quot;description&quot;: null,
  &quot;id&quot;: &quot;/subscriptions/12c7070f-83e5-453b-96d0-90770d2cf942/providers/Microsoft.Authorization/roleAssignments/13f30fcc-49ed-45dd-b971-0566b2c3220b&quot;,
  &quot;name&quot;: &quot;13f30fcc-49ed-45dd-b971-0566b2c3220b&quot;,
  &quot;principalId&quot;: &quot;26d953e1-003f-4f61-9e68-4f3a5216d8e9&quot;,
  &quot;principalName&quot;: &quot;sivaprasad.k@mitaei.net&quot;,
  &quot;principalType&quot;: &quot;User&quot;,
  &quot;roleDefinitionId&quot;: &quot;/subscriptions/12c7070f-83e5-453b-96d0-90770d2cf942/providers/Microsoft.Authorization/roleDefinitions/18d7d88d-d35e-4fb5-a5c3-7773c20a72d9&quot;,
  &quot;roleDefinitionName&quot;: &quot;User Access Administrator&quot;,
  &quot;scope&quot;: &quot;/subscriptions/12c7070f-83e5-453b-96d0-90770d2cf942&quot;,
  &quot;type&quot;: &quot;Microsoft.Authorization/roleAssignments&quot;
}

</code></pre>

<h4 id="94-verify-administrator-roles">9.4 - Verify Administrator Roles</h4>
<p>Verify all ${ARO_ADMINISTRATORS} have the <em>Contributor</em> and <em>User Access Administrator</em> subscription roles.</p>
<p><strong><em>Command(s):</em></strong></p>
<pre><code class="bash">for ARO_ADMINISTRATOR in ${ARO_ADMINISTRATORS[@]}; do az role assignment list --assignee ${ARO_ADMINISTRATOR} --output table; if [ $? -ne 0 ]; then echo &quot;ERROR! failed retrieving subscription roles for \&quot;${ADMINISTRATOR}\&quot;&quot;; fi; echo; done
</code></pre>

<p><strong><em>Example Output:</em></strong></p>
<pre><code>Principal                   Role                       Scope
--------------------------  -------------------------  ---------------------------------------------------
openshift-admin@mitaei.net  User Access Administrator  /subscriptions/12c7070f-83e5-453b-96d0-90770d2cf942
openshift-admin@mitaei.net  Contributor                /subscriptions/12c7070f-83e5-453b-96d0-90770d2cf942

Principal             Role                       Scope
--------------------  -------------------------  ---------------------------------------------------
arun.babu@mitaei.net  User Access Administrator  /subscriptions/12c7070f-83e5-453b-96d0-90770d2cf942
arun.babu@mitaei.net  Contributor                /subscriptions/12c7070f-83e5-453b-96d0-90770d2cf942

Principal                   Role                       Scope
--------------------------  -------------------------  ---------------------------------------------------
joseph.tingiris@mitaei.net  User Access Administrator  /subscriptions/12c7070f-83e5-453b-96d0-90770d2cf942
joseph.tingiris@mitaei.net  Owner                      /subscriptions/12c7070f-83e5-453b-96d0-90770d2cf942
joseph.tingiris@mitaei.net  Contributor                /subscriptions/12c7070f-83e5-453b-96d0-90770d2cf942

Principal                Role                       Scope
-----------------------  -------------------------  ---------------------------------------------------
sivaprasad.k@mitaei.net  User Access Administrator  /subscriptions/12c7070f-83e5-453b-96d0-90770d2cf942
sivaprasad.k@mitaei.net  Contributor                /subscriptions/12c7070f-83e5-453b-96d0-90770d2cf942

</code></pre>

<h3 id="10-setup-resource-providers">10 - Setup Resource Providers</h3>
<p>Make sure you are logged in to Azure via az <code>az login</code> and have the <em>Contributor</em> or <em>Owner</em> role.</p>
<p><em>NOTE:</em></p>
<ul>
<li><em>These steps will fail with only the <strong>User Access Administrator</strong> role.  An unauthorized message will be received.</em></li>
<li><em>These steps will fail without the <strong>--wait</strong> flag.  Dependent providers are automatically registered and they must be registered first.</em></li>
</ul>
<p><strong><em>Reference(s):</em></strong></p>
<ul>
<li><a href="https://docs.microsoft.com/en-us/azure/azure-resource-manager/management/resource-providers-and-types">https://docs.microsoft.com/en-us/azure/azure-resource-manager/management/resource-providers-and-types</a></li>
</ul>
<p><strong><em>Command(s):</em></strong></p>
<pre><code class="bash">echo &quot;ARO_RESOURCE_PROVIDERS=${ARO_RESOURCE_PROVIDERS[@]}&quot;
</code></pre>

<p><strong><em>Example Output:</em></strong></p>
<pre><code>ARO_RESOURCE_PROVIDERS=Microsoft.Compute Microsoft.RedHatOpenShift Microsoft.Storage
</code></pre>

<h4 id="101-register-provider-microsoftcompute">10.1 - Register Provider Microsoft.Compute</h4>
<p><strong><em>Reference(s):</em></strong></p>
<ul>
<li><a href="https://docs.microsoft.com/en-us/cli/azure/provider?view=azure-cli-latest#az_provider_register">https://docs.microsoft.com/en-us/cli/azure/provider?view=azure-cli-latest#az_provider_register</a></li>
</ul>
<p><strong><em>Command(s):</em></strong></p>
<pre><code class="bash">az provider register -n Microsoft.Compute --wait
</code></pre>

<p><strong><em>Example Output:</em></strong></p>
<pre><code class="diff">+ success does not produce any output
</code></pre>

<h4 id="102-verify-provider-microsoftcompute">10.2 - Verify Provider Microsoft.Compute</h4>
<p><strong><em>Reference(s):</em></strong></p>
<ul>
<li><a href="https://docs.microsoft.com/en-us/cli/azure/provider?view=azure-cli-latest#az_provider_show">https://docs.microsoft.com/en-us/cli/azure/provider?view=azure-cli-latest#az_provider_show</a></li>
</ul>
<p><strong><em>Command(s):</em></strong></p>
<pre><code class="bash">az provider show --namespace Microsoft.Compute --output table
</code></pre>

<p><strong><em>Example Output:</em></strong></p>
<pre><code>Namespace          RegistrationPolicy    RegistrationState
-----------------  --------------------  -------------------
Microsoft.Compute  RegistrationRequired  Registered
</code></pre>

<h4 id="103-register-provider-microsoftredhatopenshift">10.3 - Register Provider Microsoft.RedHatOpenShift</h4>
<p><strong><em>Reference(s):</em></strong></p>
<ul>
<li><a href="https://docs.microsoft.com/en-us/cli/azure/provider?view=azure-cli-latest#az_provider_register">https://docs.microsoft.com/en-us/cli/azure/provider?view=azure-cli-latest#az_provider_register</a></li>
</ul>
<p><strong><em>Command(s):</em></strong></p>
<pre><code class="bash">az provider register -n Microsoft.RedHatOpenShift --wait
</code></pre>

<p><strong><em>Example Output:</em></strong></p>
<pre><code class="diff">+ success does not produce any output
</code></pre>

<h4 id="104-verify-provider-microsoftredhatopenshift">10.4 - Verify Provider Microsoft.RedHatOpenShift</h4>
<p><strong><em>Reference(s):</em></strong></p>
<ul>
<li><a href="https://docs.microsoft.com/en-us/cli/azure/provider?view=azure-cli-latest#az_provider_show">https://docs.microsoft.com/en-us/cli/azure/provider?view=azure-cli-latest#az_provider_show</a></li>
</ul>
<p><strong><em>Command(s):</em></strong></p>
<pre><code class="bash">az provider show --namespace Microsoft.RedHatOpenShift --output table
</code></pre>

<p><strong><em>Example Output:</em></strong></p>
<pre><code>Namespace                  RegistrationPolicy    RegistrationState
-------------------------  --------------------  -------------------
Microsoft.RedHatOpenShift  RegistrationRequired  Registered
</code></pre>

<h4 id="105-register-provider-microsoftstorage">10.5 - Register Provider Microsoft.Storage</h4>
<p><strong><em>Reference(s):</em></strong></p>
<ul>
<li><a href="https://docs.microsoft.com/en-us/cli/azure/provider?view=azure-cli-latest#az_provider_register">https://docs.microsoft.com/en-us/cli/azure/provider?view=azure-cli-latest#az_provider_register</a></li>
</ul>
<p><strong><em>Command(s):</em></strong></p>
<pre><code class="bash">az provider register -n Microsoft.Storage --wait
</code></pre>

<p><strong><em>Example Output:</em></strong></p>
<pre><code class="diff">+ success does not produce any output
</code></pre>

<h4 id="106-verify-provider-microsoftstorage">10.6 - Verify Provider Microsoft.Storage</h4>
<p><strong><em>Reference(s):</em></strong></p>
<ul>
<li><a href="https://docs.microsoft.com/en-us/cli/azure/provider?view=azure-cli-latest#az_provider_show">https://docs.microsoft.com/en-us/cli/azure/provider?view=azure-cli-latest#az_provider_show</a></li>
</ul>
<p><strong><em>Command(s):</em></strong></p>
<pre><code class="bash">az provider show --namespace Microsoft.Storage --output table
</code></pre>

<p><strong><em>Example Output:</em></strong></p>
<pre><code>Namespace          RegistrationPolicy    RegistrationState
-----------------  --------------------  -------------------
Microsoft.Storage  RegistrationRequired  Registered
</code></pre>

<h3 id="11-setup-resource-group">11 - Setup Resource Group</h3>
<p>An Azure resource group is a logical group in which Azure resources are deployed and managed.</p>
<p>To create ARO resources, a resource group location must be specified. This is where the physical datacenter is located, where resource group metadata is stored, and where the Azure resources are hosted.</p>
<p><strong><em>Reference(s):</em></strong></p>
<ul>
<li><a href="https://docs.microsoft.com/en-us/cli/azure/group?view=azure-cli-latest">https://docs.microsoft.com/en-us/cli/azure/group?view=azure-cli-latest</a></li>
</ul>
<p><strong><em>Command(s):</em></strong></p>
<pre><code class="bash">env | egrep '^ARO_RESOURCE_GROUP_NAME|^ARO_LOCATION_NAME'
</code></pre>

<p><strong><em>Example Output:</em></strong></p>
<pre><code>ARO_LOCATION_NAME=eastus
ARO_RESOURCE_GROUP_NAME=ipm-eastus
</code></pre>

<h4 id="111-create-resource-group">11.1 - Create Resource Group</h4>
<p><strong><em>Reference(s):</em></strong></p>
<ul>
<li><a href="https://docs.microsoft.com/en-us/cli/azure/group?view=azure-cli-latest#az-group-create">https://docs.microsoft.com/en-us/cli/azure/group?view=azure-cli-latest#az-group-create</a></li>
</ul>
<p><strong><em>Command(s):</em></strong></p>
<pre><code class="bash">az group create --name ${ARO_RESOURCE_GROUP_NAME} --location ${ARO_LOCATION_NAME}
</code></pre>

<p><strong><em>Example Output:</em></strong></p>
<pre><code>{
  &quot;id&quot;: &quot;/subscriptions/12c7070f-83e5-453b-96d0-90770d2cf942/resourceGroups/ipm-eastus&quot;,
  &quot;location&quot;: &quot;eastus&quot;,
  &quot;managedBy&quot;: null,
  &quot;name&quot;: &quot;ipm-eastus&quot;,
  &quot;properties&quot;: {
    &quot;provisioningState&quot;: &quot;Succeeded&quot;
  },
  &quot;tags&quot;: null,
  &quot;type&quot;: &quot;Microsoft.Resources/resourceGroups&quot;
}
</code></pre>

<h4 id="112-verify-resource-group">11.2 - Verify Resource Group</h4>
<p><strong><em>Reference(s):</em></strong></p>
<ul>
<li><a href="https://docs.microsoft.com/en-us/cli/azure/group?view=azure-cli-latest#az-group-show">https://docs.microsoft.com/en-us/cli/azure/group?view=azure-cli-latest#az-group-show</a></li>
</ul>
<p><strong><em>Command(s):</em></strong></p>
<pre><code class="bash">az group show --name ${ARO_RESOURCE_GROUP_NAME}
</code></pre>

<p><strong><em>Example Output:</em></strong></p>
<pre><code>{
  &quot;id&quot;: &quot;/subscriptions/12c7070f-83e5-453b-96d0-90770d2cf942/resourceGroups/ipm-eastus&quot;,
  &quot;location&quot;: &quot;eastus&quot;,
  &quot;managedBy&quot;: null,
  &quot;name&quot;: &quot;ipm-eastus&quot;,
  &quot;properties&quot;: {
    &quot;provisioningState&quot;: &quot;Succeeded&quot;
  },
  &quot;tags&quot;: null,
  &quot;type&quot;: &quot;Microsoft.Resources/resourceGroups&quot;
}
</code></pre>

<h3 id="12-setup-virtual-network">12 - Setup Virtual Network</h3>
<p>An Azure Virtual Network (VNet) is the fundamental building block for private networks in Azure. VNet enables many types of Azure resources, such as Azure Virtual Machines (VM), to securely communicate with each other, the internet, and on-premises networks. VNet is similar to a traditional network that you'd operate in your own data center, but brings with it additional benefits of Azure's infrastructure such as scale, availability, and isolation.</p>
<p><strong><em>Reference(s):</em></strong></p>
<ul>
<li><a href="https://docs.microsoft.com/en-us/azure/virtual-network/virtual-networks-overview">https://docs.microsoft.com/en-us/azure/virtual-network/virtual-networks-overview</a></li>
</ul>
<p><strong><em>Command(s):</em></strong></p>
<pre><code class="bash">env | grep ^ARO_VNET | sort -V
</code></pre>

<p><strong><em>Example Output:</em></strong></p>
<pre><code>ARO_VNET_ADDRESS_PREFIX=10.11.0.0/21
ARO_VNET_NAME=ipm-vnet
</code></pre>

<h4 id="121-create-virtual-network">12.1 - Create Virtual Network</h4>
<p><strong><em>Reference(s):</em></strong></p>
<ul>
<li><a href="https://docs.microsoft.com/en-us/cli/azure/network/vnet?view=azure-cli-latest#az-network-vnet-create">https://docs.microsoft.com/en-us/cli/azure/network/vnet?view=azure-cli-latest#az-network-vnet-create</a></li>
<li><a href="https://docs.microsoft.com/en-us/azure/openshift/howto-create-private-cluster-4x">https://docs.microsoft.com/en-us/azure/openshift/howto-create-private-cluster-4x</a></li>
</ul>
<p><strong><em>Command(s):</em></strong></p>
<pre><code class="bash">az network vnet create --resource-group ${ARO_RESOURCE_GROUP_NAME} --name ${ARO_VNET_NAME} --address-prefixes ${ARO_VNET_ADDRESS_PREFIX}
</code></pre>

<p><strong><em>Example Output:</em></strong></p>
<pre><code>{
  &quot;newVNet&quot;: {
    &quot;addressSpace&quot;: {
      &quot;addressPrefixes&quot;: [
        &quot;10.11.0.0/21&quot;
      ]
    },
    &quot;bgpCommunities&quot;: null,
    &quot;ddosProtectionPlan&quot;: null,
    &quot;dhcpOptions&quot;: {
      &quot;dnsServers&quot;: []
    },
    &quot;enableDdosProtection&quot;: false,
    &quot;enableVmProtection&quot;: false,
    &quot;etag&quot;: &quot;W/\&quot;070e6b93-8c8b-4c6a-84f9-231a20da9180\&quot;&quot;,
    &quot;id&quot;: &quot;/subscriptions/12c7070f-83e5-453b-96d0-90770d2cf942/resourceGroups/ipm-eastus/providers/Microsoft.Network/virtualNetworks/ipm-vnet&quot;,
    &quot;ipAllocations&quot;: null,
    &quot;location&quot;: &quot;eastus&quot;,
    &quot;name&quot;: &quot;ipm-vnet&quot;,
    &quot;provisioningState&quot;: &quot;Succeeded&quot;,
    &quot;resourceGroup&quot;: &quot;ipm-eastus&quot;,
    &quot;resourceGuid&quot;: &quot;71df59a1-9f16-450f-a6b5-282bacfe01bb&quot;,
    &quot;subnets&quot;: [],
    &quot;tags&quot;: {},
    &quot;type&quot;: &quot;Microsoft.Network/virtualNetworks&quot;,
    &quot;virtualNetworkPeerings&quot;: []
  }
}
</code></pre>

<h4 id="122-verify-virtual-network">12.2 - Verify Virtual Network</h4>
<p><strong><em>Reference(s):</em></strong></p>
<ul>
<li><a href="https://docs.microsoft.com/en-us/cli/azure/network/vnet?view=azure-cli-latest#az-network-vnet-show">https://docs.microsoft.com/en-us/cli/azure/network/vnet?view=azure-cli-latest#az-network-vnet-show</a></li>
</ul>
<p><strong><em>Command(s):</em></strong></p>
<pre><code class="bash">az network vnet show --resource-group ${ARO_RESOURCE_GROUP_NAME} --name ${ARO_VNET_NAME} --output table
</code></pre>

<p><strong><em>Example Output:</em></strong></p>
<pre><code>EnableDdosProtection    EnableVmProtection    Location    Name      ProvisioningState    ResourceGroup    ResourceGuid
----------------------  --------------------  ----------  --------  -------------------  ---------------  ------------------------------------
False                   False                 eastus      ipm-vnet  Succeeded            ipm-eastus       71df59a1-9f16-450f-a6b5-282bacfe01bb
</code></pre>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="tldr/" class="btn btn-neutral float-right" title="TL;DR">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p>&copy; 2020 Mastech InfoTrellis</p>
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
      
        <span style="margin-left: 15px"><a href="tldr/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '.';</script>
    <script src="js/theme.js" defer></script>
      <script src="search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>

<!--
MkDocs version : 1.1.2
Build Date UTC : 2020-09-23 14:12:41.410949+00:00
-->
